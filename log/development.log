  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accesses"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "accesses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "level" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_accesses_on_book_id" ON "accesses" ("book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accesses_on_user_id_and_book_id" ON "accesses" ("user_id", "book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accesses_on_user_id" ON "accesses" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "join_code" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "custom_styles" text)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "action_text_markdowns"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "action_text_markdowns" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "name" varchar NOT NULL, "content" text DEFAULT '' NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_action_text_markdowns_on_record" ON "action_text_markdowns" ("record_type", "record_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, "slug" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_on_slug" ON "active_storage_attachments" ("slug")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "books"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "subtitle" varchar, "author" varchar, "published" boolean DEFAULT 0 NOT NULL, "slug" varchar NOT NULL, "everyone_access" boolean DEFAULT 1 NOT NULL, "theme" varchar DEFAULT 'blue' NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_books_on_published" ON "books" ("published")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "edits"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "edits" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "leaf_id" integer NOT NULL, "leafable_type" varchar NOT NULL, "leafable_id" integer NOT NULL, "action" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_edits_on_leaf_id" ON "edits" ("leaf_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_edits_on_leafable" ON "edits" ("leafable_type", "leafable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "leaves"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "leaves" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "book_id" integer NOT NULL, "leafable_type" varchar NOT NULL, "leafable_id" integer NOT NULL, "position_score" float NOT NULL, "status" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "title" varchar NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_leaves_on_book_id" ON "leaves" ("book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_leafs_on_leafable" ON "leaves" ("leafable_type", "leafable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "pages"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "pages" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "pictures"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "pictures" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "caption" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sections"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "sections" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "theme" varchar, "body" text)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sessions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sessions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "token" varchar NOT NULL, "ip_address" varchar, "user_agent" varchar, "last_active_at" datetime(6) NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sessions_on_token" ON "sessions" ("token")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sessions_on_user_id" ON "sessions" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email_address" varchar NOT NULL, "password_digest" varchar NOT NULL, "role" integer NOT NULL, "active" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_address" ON "users" ("email_address")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_name" ON "users" ("name")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccesses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "level" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccesses_on_user_id" ON "aaccesses" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aaccesses_on_user_id_and_book_id" ON "aaccesses" ("user_id", "book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccesses_on_book_id" ON "aaccesses" ("book_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aaccesses" ("id","user_id","book_id","level","created_at","updated_at")
                     SELECT "id","user_id","book_id","level","created_at","updated_at" FROM "accesses"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "accesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accesses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "level" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_a453fa1dab"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accesses_on_book_id" ON "accesses" ("book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accesses_on_user_id_and_book_id" ON "accesses" ("user_id", "book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accesses_on_user_id" ON "accesses" ("user_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "accesses" ("id","user_id","book_id","level","created_at","updated_at")
                     SELECT "id","user_id","book_id","level","created_at","updated_at" FROM "aaccesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (1.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccesses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "level" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccesses_on_user_id" ON "aaccesses" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aaccesses_on_user_id_and_book_id" ON "aaccesses" ("user_id", "book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccesses_on_book_id" ON "aaccesses" ("book_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aaccesses" ("id","user_id","book_id","level","created_at","updated_at")
                     SELECT "id","user_id","book_id","level","created_at","updated_at" FROM "accesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "accesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accesses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "level" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_a453fa1dab"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
, CONSTRAINT "fk_rails_e47574ce84"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accesses_on_book_id" ON "accesses" ("book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accesses_on_user_id_and_book_id" ON "accesses" ("user_id", "book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accesses_on_user_id" ON "accesses" ("user_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "accesses" ("id","user_id","book_id","level","created_at","updated_at")
                     SELECT "id","user_id","book_id","level","created_at","updated_at" FROM "aaccesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccesses"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aactive_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, "slug" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aactive_storage_attachments_on_slug" ON "aactive_storage_attachments" ("slug")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aactive_storage_attachments_uniqueness" ON "aactive_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aactive_storage_attachments_on_blob_id" ON "aactive_storage_attachments" ("blob_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aactive_storage_attachments" ("id","name","record_type","record_id","blob_id","created_at","slug")
                     SELECT "id","name","record_type","record_id","blob_id","created_at","slug" FROM "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "active_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, "slug" varchar, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_on_slug" ON "active_storage_attachments" ("slug")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("id","name","record_type","record_id","blob_id","created_at","slug")
                     SELECT "id","name","record_type","record_id","blob_id","created_at","slug" FROM "aactive_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aactive_storage_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aactive_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aactive_storage_variant_records_uniqueness" ON "aactive_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aactive_storage_variant_records" ("id","blob_id","variation_digest")
                     SELECT "id","blob_id","variation_digest" FROM "active_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "active_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "active_storage_variant_records" ("id","blob_id","variation_digest")
                     SELECT "id","blob_id","variation_digest" FROM "aactive_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aactive_storage_variant_records"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aedits" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "leaf_id" integer NOT NULL, "leafable_type" varchar NOT NULL, "leafable_id" integer NOT NULL, "action" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aedits_on_leafable" ON "aedits" ("leafable_type", "leafable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aedits_on_leaf_id" ON "aedits" ("leaf_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aedits" ("id","leaf_id","leafable_type","leafable_id","action","created_at","updated_at")
                     SELECT "id","leaf_id","leafable_type","leafable_id","action","created_at","updated_at" FROM "edits"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "edits"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "edits" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "leaf_id" integer NOT NULL, "leafable_type" varchar NOT NULL, "leafable_id" integer NOT NULL, "action" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_855918d132"
FOREIGN KEY ("leaf_id")
  REFERENCES "leaves" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_edits_on_leaf_id" ON "edits" ("leaf_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_edits_on_leafable" ON "edits" ("leafable_type", "leafable_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "edits" ("id","leaf_id","leafable_type","leafable_id","action","created_at","updated_at")
                     SELECT "id","leaf_id","leafable_type","leafable_id","action","created_at","updated_at" FROM "aedits"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aedits"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aleaves" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "book_id" integer NOT NULL, "leafable_type" varchar NOT NULL, "leafable_id" integer NOT NULL, "position_score" float NOT NULL, "status" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "title" varchar NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_leafs_on_leafable" ON "aleaves" ("leafable_type", "leafable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aleaves_on_book_id" ON "aleaves" ("book_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aleaves" ("id","book_id","leafable_type","leafable_id","position_score","status","created_at","updated_at","title")
                     SELECT "id","book_id","leafable_type","leafable_id","position_score","status","created_at","updated_at","title" FROM "leaves"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "leaves"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "leaves" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "book_id" integer NOT NULL, "leafable_type" varchar NOT NULL, "leafable_id" integer NOT NULL, "position_score" float NOT NULL, "status" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "title" varchar NOT NULL, CONSTRAINT "fk_rails_3bb84105c0"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_leaves_on_book_id" ON "leaves" ("book_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_leafs_on_leafable" ON "leaves" ("leafable_type", "leafable_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "leaves" ("id","book_id","leafable_type","leafable_id","position_score","status","created_at","updated_at","title")
                     SELECT "id","book_id","leafable_type","leafable_id","position_score","status","created_at","updated_at","title" FROM "aleaves"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aleaves"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "asessions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "token" varchar NOT NULL, "ip_address" varchar, "user_agent" varchar, "last_active_at" datetime(6) NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_asessions_on_user_id" ON "asessions" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_asessions_on_token" ON "asessions" ("token")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "asessions" ("id","user_id","token","ip_address","user_agent","last_active_at","created_at","updated_at")
                     SELECT "id","user_id","token","ip_address","user_agent","last_active_at","created_at","updated_at" FROM "sessions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "sessions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sessions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "token" varchar NOT NULL, "ip_address" varchar, "user_agent" varchar, "last_active_at" datetime(6) NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_758836b4f0"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sessions_on_token" ON "sessions" ("token")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sessions_on_user_id" ON "sessions" ("user_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "sessions" ("id","user_id","token","ip_address","user_agent","last_active_at","created_at","updated_at")
                     SELECT "id","user_id","token","ip_address","user_agent","last_active_at","created_at","updated_at" FROM "asessions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "asessions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE VIRTUAL TABLE IF NOT EXISTS leaf_search_index USING fts5 (title, content, tokenize='porter')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240928005927)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240625224312),
(20240625202351),
(20240625084002),
(20240617075643);[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 02:29:14.039128', '2024-11-21 02:29:14.039129') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'f3d918a279728bd9ee73c0fc430df4eeb0e22eab', '2024-11-21 02:29:14.040792', '2024-11-21 02:29:14.040793') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2024-11-21 10:29:26 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by BooksController#index as HTML
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."published" = ? LIMIT ?[0m  [["published", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:59:in `ensure_index_is_not_empty'
Redirected to http://localhost:3000/session/new
Filter chain halted as :ensure_index_is_not_empty rendered or redirected
Completed 302 Found in 93ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 4.4ms)


Started GET "/session/new" for ::1 at 2024-11-21 10:29:26 +0800
Processing by SessionsController#new as HTML
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/sessions_controller.rb:27:in `ensure_user_exists'
Redirected to http://localhost:3000/first_run
Filter chain halted as :ensure_user_exists rendered or redirected
Completed 302 Found in 36ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.1ms)


Started GET "/first_run" for ::1 at 2024-11-21 10:29:26 +0800
Processing by FirstRunsController#show as HTML
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/first_runs_controller.rb:19:in `prevent_running_after_setup'
  Rendering layout layouts/application.html.erb
  Rendering first_runs/show.html.erb within layouts/application
  Rendered first_runs/show.html.erb within layouts/application (Duration: 12.8ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 33.2ms | GC: 0.0ms)
Completed 200 OK in 80ms (Views: 35.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/_reset-9c3efd7b.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/animation-1682b112.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/arrangement-c9cf9cb6.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/buttons-a64f7e63.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/colors-a7c91784.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/dialog-7b5e0174.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/house-ff27e08a.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/inputs-1ea862b1.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/layout-e0cc5584.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/library-057fba11.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/lightbox-4b7304b1.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/pages-5dde5a94.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/panels-fea8d3f3.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/popover-af2d6172.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/product-337efcef.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/qr-code-09948d66.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/search-a617fcd6.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/sidebar-3dac38ff.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/syntax-f7150790.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/text-94431914.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/toc-50e24158.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/translations-e96ea992.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/utilities-32924371.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/base-a40e8eee.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/application-9897dfb8.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/turbo.min-fae85750.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/stimulus.min-4b1e420e.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/stimulus-loading-1fc53fe7.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/@rails--request-10d39805.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/actions/index-a8af7f75.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/actions/scroll_into_view-9f3401f5.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/books-c0aa9913.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/application-3affb389.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/auto_submit_controller-ee52d396.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/autoremove_controller-4526910a.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/breadcrumbs-9b980014.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/autosave_controller-dd3ea732.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/autoselect_controller-0cb7d4b1.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/copy_to_clipboard_controller-07e32f4d.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/dependent_checkbox_controller-5e5cab70.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/dialog_controller-b6629724.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/edit_mode_controller-61080a1c.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/form_controller-6f3d64db.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/fullscreen_controller-e4a3fba2.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/hotkey_controller-0d616407.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/index-c3f5d3c4.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/lightbox_controller-de0ddc64.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/popover_controller-6d55debe.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/reading_progress_controller-1fc9604c.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/reading_tracker_controller-d394aa22.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/scroll_to_highlight_controller-c828e5e2.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/sidebar_controller-0ea88c95.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/touch_controller-0b5ff8b4.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/upload_preview_controller-7b3123d6.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/trix-c4e7be2d.css" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/web_share_controller-d62a7b0f.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/helpers/cookie_helpers-a1787e92.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/helpers/form_helpers-70a3c11f.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/helpers/reading_progress_helpers-d5510241.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/writebook-icon-8e8f4c33.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/person-01c1c915.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/application-9897dfb8.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/actions/scroll_into_view-9f3401f5.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/email-6c595bc5.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/turbo.min-fae85750.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/application-3affb389.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/password-0896da4e.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/auto_submit_controller-ee52d396.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/autoremove_controller-4526910a.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/arrow-right-61dca488.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/autosave_controller-dd3ea732.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/copy_to_clipboard_controller-07e32f4d.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/autoselect_controller-0cb7d4b1.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/dependent_checkbox_controller-5e5cab70.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/dialog_controller-b6629724.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/edit_mode_controller-61080a1c.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/form_controller-6f3d64db.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/fullscreen_controller-e4a3fba2.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/hotkey_controller-0d616407.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/index-c3f5d3c4.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/lightbox_controller-de0ddc64.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/popover_controller-6d55debe.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/house.min-40172b20.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/reading_tracker_controller-d394aa22.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/scroll_to_highlight_controller-c828e5e2.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/stimulus-loading-1fc53fe7.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/stimulus.min-4b1e420e.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/@rails--request-10d39805.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/actions/index-a8af7f75.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/arrangement_controller-ee58c295.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/toc_view_controller-883b15e2.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/remove-d18dd986.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/helpers/timing_helpers-94d95529.js" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/globe-8c54d23b.svg" for ::1 at 2024-11-21 10:29:27 +0800
Started GET "/assets/controllers/reading_progress_controller-1fc9604c.js" for ::1 at 2024-11-21 10:29:28 +0800
Started GET "/manifest.json" for ::1 at 2024-11-21 10:29:28 +0800
Processing by Rails::PwaController#manifest as JSON
  Rendering pwa/manifest.json.erb
  Rendered pwa/manifest.json.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 49ms (Views: 2.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/books/1.json" for ::1 at 2024-11-21 12:25:14 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (1.5ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 41.9ms | GC: 0.0ms)
Completed 200 OK in 165ms (Views: 42.9ms | ActiveRecord: 3.7ms (12 queries, 0 cached) | GC: 5.1ms)


Started GET "/1/the-writebook-manual/2/installation" for ::1 at 2024-11-21 12:25:16 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"2", "slug"=>"installation"}
  [1m[36mSession Load (0.5ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.6ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 9.0ms | GC: 0.9ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 2], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 2.9ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 21.9ms | GC: 0.9ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 13.1ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 2.0ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 44.0ms | GC: 1.2ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 79.0ms | GC: 1.2ms)
Completed 200 OK in 135ms (Views: 78.5ms | ActiveRecord: 2.2ms (16 queries, 3 cached) | GC: 1.5ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 12:25:16 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.3ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 2.8ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 10.1ms | GC: 0.1ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.8ms | GC: 0.1ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.3ms | GC: 0.1ms)
  [1m[36mCACHE Access Load (0.1ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.1ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [3 times] (Duration: 20.6ms | GC: 0.6ms)
  Rendered books/show.html.erb within layouts/application (Duration: 55.2ms | GC: 1.9ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 56.8ms | GC: 1.9ms)
Completed 200 OK in 115ms (Views: 56.0ms | ActiveRecord: 1.3ms (29 queries, 15 cached) | GC: 1.9ms)


Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 12:25:16 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 42ms (ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/manifest.json" for ::1 at 2024-11-21 12:25:17 +0800
Started GET "/1/the-writebook-manual/2/installation" for ::1 at 2024-11-21 12:25:17 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"2", "slug"=>"installation"}
Processing by Rails::PwaController#manifest as JSON
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.6ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 2], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 10.7ms | GC: 0.1ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.2ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.3ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 5.7ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 3.4ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 24.1ms | GC: 0.4ms)
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 26.4ms | GC: 0.9ms)
Completed 200 OK in 96ms (Views: 26.2ms | ActiveRecord: 1.1ms (16 queries, 3 cached) | GC: 1.0ms)


  Rendering pwa/manifest.json.erb
  Rendered pwa/manifest.json.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 96ms (Views: 3.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.0ms)


Started GET "/" for ::1 at 2024-11-21 12:25:19 +0800
Processing by BooksController#index as HTML
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering layout layouts/application.html.erb
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.html.erb:29
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/_book.html.erb:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/_book.html.erb:6
  Rendered collection of books/_book.html.erb [1 times] (Duration: 4.8ms | GC: 0.0ms)
  Rendered books/_new.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered books/index.html.erb within layouts/application (Duration: 8.5ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | GC: 0.0ms)
Completed 200 OK in 86ms (Views: 10.3ms | ActiveRecord: 0.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1/bookmark" for ::1 at 2024-11-21 12:25:19 +0800
Processing by Books::BookmarksController#show as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/book_scoped.rb:8:in `set_book'
  [1m[36mLeaf Load (0.3ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books/bookmarks_controller.rb:7:in `show'
  Rendering layout /Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/views/layouts/turbo_rails/frame.html.erb
  Rendering books/bookmarks/show.html.erb within layouts/turbo_rails/frame
  [1m[36mLeaf Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?)[0m  [["book_id", 1], ["status", "active"], ["id", 1], [nil, 1.0]]
  ↳ app/models/concerns/positionable.rb:63:in `ordinal_position'
  [1m[36mLeaf Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ?[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/models/concerns/positionable.rb:58:in `position_as_percentage'
  Rendered books/bookmarks/show.html.erb within layouts/turbo_rails/frame (Duration: 5.7ms | GC: 2.3ms)
  Rendered layout /Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/views/layouts/turbo_rails/frame.html.erb (Duration: 6.0ms | GC: 2.3ms)
Completed 200 OK in 47ms (Views: 6.4ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 2.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:25:20 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 17.6ms | GC: 0.7ms)
Completed 200 OK in 67ms (Views: 17.5ms | ActiveRecord: 0.5ms (12 queries, 0 cached) | GC: 1.2ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:25:21 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 11.4ms | GC: 0.3ms)
Completed 200 OK in 52ms (Views: 11.8ms | ActiveRecord: 0.5ms (12 queries, 0 cached) | GC: 0.3ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:25:23 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 4.9ms | GC: 0.0ms)
Completed 200 OK in 50ms (Views: 5.0ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:25:23 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.2ms | GC: 2.6ms)
Completed 200 OK in 50ms (Views: 9.2ms | ActiveRecord: 0.4ms (12 queries, 0 cached) | GC: 2.6ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 12:26:04 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [3 times] (Duration: 14.2ms | GC: 0.2ms)
  Rendered books/show.html.erb within layouts/application (Duration: 28.1ms | GC: 0.5ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 30.3ms | GC: 0.7ms)
Completed 200 OK in 85ms (Views: 30.0ms | ActiveRecord: 0.6ms (29 queries, 15 cached) | GC: 1.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:26:08 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.9ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 8.6ms | ActiveRecord: 0.5ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:26:09 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 10.9ms | GC: 1.2ms)
Completed 200 OK in 63ms (Views: 10.9ms | ActiveRecord: 0.6ms (12 queries, 0 cached) | GC: 1.2ms)


Started GET "/books/new" for ::1 at 2024-11-21 12:26:09 +0800
Processing by BooksController#new as HTML
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering layout layouts/application.html.erb
  Rendering books/new.html.erb within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = ? ORDER BY "users"."name" ASC[0m  [["active", 1]]
  ↳ app/views/books/_form.html.erb:81
  [1m[36mAccess Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accesses" WHERE "accesses"."book_id" IS NULL AND (1=0) AND "accesses"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:24:in `accessable?'
  Rendered collection of books/accesses/_access.html.erb [1 times] (Duration: 2.6ms | GC: 0.0ms)
  Rendered books/_form.html.erb (Duration: 13.0ms | GC: 0.1ms)
  Rendered books/new.html.erb within layouts/application (Duration: 15.0ms | GC: 0.1ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | GC: 0.2ms)
Completed 200 OK in 61ms (Views: 16.1ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:26:13 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.9ms | GC: 0.0ms)
Completed 200 OK in 51ms (Views: 5.8ms | ActiveRecord: 0.5ms (12 queries, 0 cached) | GC: 0.4ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:26:17 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 1.6ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:26:18 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.3ms | GC: 0.7ms)
Completed 200 OK in 53ms (Views: 2.4ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:26:43 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.1ms | GC: 0.2ms)
Completed 200 OK in 41ms (Views: 4.0ms | ActiveRecord: 0.3ms (12 queries, 0 cached) | GC: 0.7ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:26:44 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 7.1ms | GC: 0.1ms)
Completed 200 OK in 59ms (Views: 7.1ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.1ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:26:45 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 10.5ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 10.4ms | ActiveRecord: 0.4ms (12 queries, 0 cached) | GC: 0.5ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:26:46 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 14.4ms | GC: 0.0ms)
Completed 200 OK in 64ms (Views: 14.4ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 1.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 12:26:46 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.3ms | GC: 0.8ms)
Completed 200 OK in 53ms (Views: 5.3ms | ActiveRecord: 0.4ms (12 queries, 0 cached) | GC: 0.8ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:26:50 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 2.2ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.1ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:26:54 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.9ms | GC: 0.3ms)
Completed 200 OK in 51ms (Views: 2.2ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.3ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:29:49 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 45ms (Views: 2.4ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 12:29:49 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 3.2ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 1.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.2ms | GC: 0.1ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [3 times] (Duration: 9.4ms | GC: 0.9ms)
  Rendered books/show.html.erb within layouts/application (Duration: 30.1ms | GC: 3.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 31.9ms | GC: 3.0ms)
Completed 200 OK in 84ms (Views: 31.7ms | ActiveRecord: 0.6ms (29 queries, 15 cached) | GC: 3.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:30:07 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 36ms (Views: 3.4ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/new" for ::1 at 2024-11-21 12:30:07 +0800
Processing by BooksController#new as HTML
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering layout layouts/application.html.erb
  Rendering books/new.html.erb within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = ? ORDER BY "users"."name" ASC[0m  [["active", 1]]
  ↳ app/views/books/_form.html.erb:81
  [1m[36mAccess Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accesses" WHERE "accesses"."book_id" IS NULL AND (1=0) AND "accesses"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:24:in `accessable?'
  Rendered collection of books/accesses/_access.html.erb [1 times] (Duration: 1.8ms | GC: 0.0ms)
  Rendered books/_form.html.erb (Duration: 5.4ms | GC: 0.0ms)
  Rendered books/new.html.erb within layouts/application (Duration: 6.4ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | GC: 0.0ms)
Completed 200 OK in 70ms (Views: 11.3ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:36:23 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (4.5ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 2.0ms | ActiveRecord: 4.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:41:27 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.3ms | GC: 0.5ms)
Completed 200 OK in 47ms (Views: 2.1ms | ActiveRecord: 0.8ms (5 queries, 0 cached) | GC: 0.5ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:43:44 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 1.5ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:50:00 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (1.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 5.4ms | GC: 0.2ms)
Completed 200 OK in 51ms (Views: 6.0ms | ActiveRecord: 1.5ms (5 queries, 0 cached) | GC: 0.6ms)


Started POST "/session" for ::1 at 2024-11-21 12:50:29 +0800
Processing by SessionsController#create as */*
  Parameters: {"email_address"=>"[FILTERED]", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
Can't verify CSRF token authenticity.
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = ? AND "users"."email_address" = ? LIMIT ?[0m  [["active", 1], ["email_address", "hello@write.book"], ["LIMIT", 1]]
  ↳ app/controllers/sessions_controller.rb:12:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/session.rb:11:in `start!'
  [1m[35mSQL (0.2ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/session.rb:11:in `start!'
  [1m[36mSession Create (1.3ms)[0m  [1m[32mINSERT INTO "sessions" ("user_id", "token", "ip_address", "user_agent", "last_active_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["token", "fmfWHDt6DX17RjN1ZDQfShDz"], ["ip_address", "::1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"], ["last_active_at", "2024-11-21 04:50:29.414517"], ["created_at", "2024-11-21 04:50:29.414399"], ["updated_at", "2024-11-21 04:50:29.414399"]]
  ↳ app/models/session.rb:11:in `start!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/session.rb:11:in `start!'
Redirected to http://localhost:3001/
Completed 302 Found in 310ms (ActiveRecord: 3.4ms (6 queries, 1 cached) | GC: 0.2ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:50:29 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 27.8ms | GC: 4.0ms)
Completed 200 OK in 69ms (Views: 29.9ms | ActiveRecord: 0.7ms (5 queries, 0 cached) | GC: 4.0ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 12:50:29 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 36ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/session" for ::1 at 2024-11-21 12:50:34 +0800
Processing by SessionsController#create as */*
  Parameters: {"email_address"=>"[FILTERED]", "password"=>"[FILTERED]", "session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Content in 32ms (ActiveRecord: 0.9ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
rails (13d5f8720892) actionpack/lib/action_controller/metal/request_forgery_protection.rb:312:in `handle_unverified_request'
rails (13d5f8720892) actionpack/lib/action_controller/metal/request_forgery_protection.rb:406:in `handle_unverified_request'
rails (13d5f8720892) actionpack/lib/action_controller/metal/request_forgery_protection.rb:395:in `verify_authenticity_token'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:361:in `block in make_lambda'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:178:in `block in call'
rails (13d5f8720892) actionpack/lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:179:in `call'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:558:in `block in invoke_before'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:558:in `each'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:558:in `invoke_before'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
turbo-rails (2.0.11) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.11) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
rails (13d5f8720892) actiontext/lib/action_text/rendering.rb:25:in `with_renderer'
rails (13d5f8720892) actiontext/lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
rails (13d5f8720892) actionpack/lib/abstract_controller/callbacks.rb:260:in `process_action'
rails (13d5f8720892) actionpack/lib/action_controller/metal/rescue.rb:27:in `process_action'
rails (13d5f8720892) actionpack/lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
rails (13d5f8720892) activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
rails (13d5f8720892) activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
rails (13d5f8720892) activesupport/lib/active_support/notifications.rb:210:in `instrument'
rails (13d5f8720892) actionpack/lib/action_controller/metal/instrumentation.rb:75:in `process_action'
rails (13d5f8720892) actionpack/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
rails (13d5f8720892) activerecord/lib/active_record/railties/controller_runtime.rb:39:in `process_action'
rails (13d5f8720892) actionpack/lib/abstract_controller/base.rb:163:in `process'
rails (13d5f8720892) actionview/lib/action_view/rendering.rb:40:in `process'
rails (13d5f8720892) actionpack/lib/action_controller/metal.rb:252:in `dispatch'
rails (13d5f8720892) actionpack/lib/action_controller/metal.rb:335:in `dispatch'
rails (13d5f8720892) actionpack/lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
rails (13d5f8720892) actionpack/lib/action_dispatch/routing/route_set.rb:50:in `serve'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:53:in `block in serve'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:126:in `each'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:126:in `find_routes'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:34:in `serve'
rails (13d5f8720892) actionpack/lib/action_dispatch/routing/route_set.rb:908:in `call'
rails (13d5f8720892) railties/lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.1.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.8) lib/rack/etag.rb:29:in `call'
rack (3.1.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.8) lib/rack/head.rb:15:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/http/permissions_policy.rb:38:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/cookies.rb:706:in `call'
rails (13d5f8720892) activerecord/lib/active_record/migration.rb:672:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:100:in `run_callbacks'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/callbacks.rb:30:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/executor.rb:16:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
rails (13d5f8720892) railties/lib/rails/rack/logger.rb:41:in `call_app'
rails (13d5f8720892) railties/lib/rails/rack/logger.rb:29:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.1.8) lib/rack/method_override.rb:28:in `call'
rack (3.1.8) lib/rack/runtime.rb:24:in `call'
rails (13d5f8720892) activesupport/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/server_timing.rb:60:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/executor.rb:16:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.8) lib/rack/sendfile.rb:114:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rails (13d5f8720892) railties/lib/rails/engine.rb:536:in `call'
puma (6.4.3) lib/puma/configuration.rb:272:in `call'
puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.3) lib/puma/request.rb:99:in `handle_request'
puma (6.4.3) lib/puma/server.rb:464:in `process_client'
puma (6.4.3) lib/puma/server.rb:245:in `block in run'
puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/session" for ::1 at 2024-11-21 12:56:02 +0800
Processing by SessionsController#create as */*
  Parameters: {"email_address"=>"[FILTERED]", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSession Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
Can't verify CSRF token authenticity.
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = ? AND "users"."email_address" = ? LIMIT ?[0m  [["active", 1], ["email_address", "hello@write.book"], ["LIMIT", 1]]
  ↳ app/controllers/sessions_controller.rb:12:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/session.rb:11:in `start!'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/session.rb:11:in `start!'
  [1m[36mSession Create (0.4ms)[0m  [1m[32mINSERT INTO "sessions" ("user_id", "token", "ip_address", "user_agent", "last_active_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["token", "Pf8pCAWP33dXJqCm1JMbo2Nq"], ["ip_address", "::1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"], ["last_active_at", "2024-11-21 04:56:02.471089"], ["created_at", "2024-11-21 04:56:02.471061"], ["updated_at", "2024-11-21 04:56:02.471061"]]
  ↳ app/models/session.rb:11:in `start!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/session.rb:11:in `start!'
Redirected to http://localhost:3001/
Completed 302 Found in 284ms (ActiveRecord: 1.8ms (6 queries, 1 cached) | GC: 0.5ms)


Started GET "/books.json" for ::1 at 2024-11-21 12:56:02 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 21.7ms | GC: 4.0ms)
Completed 200 OK in 67ms (Views: 22.5ms | ActiveRecord: 0.8ms (5 queries, 0 cached) | GC: 4.0ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 12:56:02 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.1ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 35ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.1ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:00:30 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 3.1ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:00:34 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.2ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.4ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 22.8ms | GC: 4.3ms)
Completed 200 OK in 78ms (Views: 22.0ms | ActiveRecord: 1.4ms (12 queries, 0 cached) | GC: 4.3ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:00:40 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 64ms (Views: 2.0ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:01:06 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 5.3ms | ActiveRecord: 0.4ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:01:07 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 3.4ms | GC: 0.7ms)
Completed 200 OK in 45ms (Views: 3.6ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.7ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:01:55 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 46ms (Views: 3.8ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:02:20 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 2.3ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:11:04 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.6ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 1.6ms | ActiveRecord: 0.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:11:14 +0800
Processing by BooksController#index as JSON
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 58ms (Views: 1.6ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 3.2ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:15:34 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.8ms | GC: 0.2ms)
Completed 200 OK in 41ms (Views: 3.3ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:15:42 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 2.9ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.1ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:21:15 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.8ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 1.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 3.5ms | GC: 2.6ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 8.3ms | GC: 0.5ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [3 times] (Duration: 9.6ms | GC: 2.4ms)
  Rendered books/show.html.erb within layouts/application (Duration: 41.4ms | GC: 5.6ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 73.6ms | GC: 28.9ms)
Completed 200 OK in 129ms (Views: 72.5ms | ActiveRecord: 2.4ms (29 queries, 15 cached) | GC: 28.9ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:21:15 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:21:15 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 70ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.1ms)


  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 65ms (ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.1ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/1/the-writebook-manual/1/welcome" for ::1 at 2024-11-21 13:21:15 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"1", "slug"=>"welcome"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 1], [nil, 1.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.6ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 1], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 18.7ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 3.2ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.3ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 1], [nil, 1.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 5.5ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 37.2ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 38.1ms | GC: 0.0ms)
Completed 200 OK in 74ms (Views: 37.5ms | ActiveRecord: 1.4ms (16 queries, 3 cached) | GC: 0.0ms)


Started GET "/assets/sidebar-830c7200.svg" for ::1 at 2024-11-21 13:21:17 +0800
Started GET "/assets/link-e546a5df.svg" for ::1 at 2024-11-21 13:21:17 +0800
Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:21:22 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [3 times] (Duration: 8.8ms | GC: 0.6ms)
  Rendered books/show.html.erb within layouts/application (Duration: 20.8ms | GC: 1.4ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.2ms | GC: 1.5ms)
Completed 200 OK in 79ms (Views: 22.4ms | ActiveRecord: 0.7ms (29 queries, 15 cached) | GC: 2.0ms)


Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:21:22 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 36ms (ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.4ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/1/the-writebook-manual/2/installation" for ::1 at 2024-11-21 13:21:23 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"2", "slug"=>"installation"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 2], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 4.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 1.7ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 8.4ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | GC: 0.0ms)
Completed 200 OK in 69ms (Views: 9.4ms | ActiveRecord: 0.5ms (16 queries, 3 cached) | GC: 0.0ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:21:25 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [3 times] (Duration: 6.5ms | GC: 0.5ms)
  Rendered books/show.html.erb within layouts/application (Duration: 14.7ms | GC: 1.4ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.4ms | GC: 1.4ms)
Completed 200 OK in 77ms (Views: 16.6ms | ActiveRecord: 0.6ms (29 queries, 15 cached) | GC: 3.0ms)


Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:21:25 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
Started GET "/assets/house.min-40172b20.js" for ::1 at 2024-11-21 13:21:25 +0800
Started GET "/assets/controllers/arrangement_controller-ee58c295.js" for ::1 at 2024-11-21 13:21:25 +0800
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 37ms (ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/manifest.json" for ::1 at 2024-11-21 13:21:25 +0800
Processing by Rails::PwaController#manifest as JSON
  Rendering pwa/manifest.json.erb
  Rendered pwa/manifest.json.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 3.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 2.5ms)


Started POST "/books/1/pages" for ::1 at 2024-11-21 13:21:28 +0800
Processing by PagesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "book_id"=>"1"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[35mSQL (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/book.rb:13:in `press'
  [1m[36mPage Create (0.4ms)[0m  [1m[32mINSERT INTO "pages" ("created_at", "updated_at") VALUES (?, ?) RETURNING "id"[0m  [["created_at", "2024-11-21 05:21:28.666088"], ["updated_at", "2024-11-21 05:21:28.666088"]]
  ↳ app/models/book.rb:13:in `press'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/book.rb:13:in `press'
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:115:in `with_positioning_lock'
  [1m[36mLeaf Maximum (0.0ms)[0m  [1m[34mSELECT MAX("leaves"."position_score") FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ?[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/models/concerns/positionable.rb:78:in `position_at_end'
  [1m[36mLeaf Create (0.1ms)[0m  [1m[32mINSERT INTO "leaves" ("book_id", "leafable_type", "leafable_id", "position_score", "status", "created_at", "updated_at", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["book_id", 1], ["leafable_type", "Page"], ["leafable_id", 4], ["position_score", 4.0], ["status", "active"], ["created_at", "2024-11-21 05:21:28.668752"], ["updated_at", "2024-11-21 05:21:28.668752"], ["title", "Untitled"]]
  ↳ app/models/concerns/positionable.rb:69:in `block in insert_at_default_position'
  [1m[36mBook Update (0.0ms)[0m  [1m[33mUPDATE "books" SET "updated_at" = ? WHERE "books"."id" = ?[0m  [["updated_at", "2024-11-21 05:21:28.673338"], ["id", 1]]
  ↳ app/models/book.rb:13:in `press'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/book.rb:13:in `press'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[35m (0.2ms)[0m  [1m[32minsert into leaf_search_index(rowid, title, content ) values (4, 'Untitled', '')[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  Rendering leafables/create.turbo_stream.erb
  Rendered leaves/_edit.html.erb (Duration: 2.5ms | GC: 0.2ms)
  Rendered leafables/create.turbo_stream.erb (Duration: 4.2ms | GC: 0.2ms)
Completed 200 OK in 59ms (Views: 4.7ms | ActiveRecord: 1.3ms (13 queries, 0 cached) | GC: 1.8ms)


Started GET "/books/1/pages/4" for ::1 at 2024-11-21 13:21:30 +0800
Processing by PagesController#show as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 1.4ms | GC: 0.1ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 4.6ms | GC: 0.1ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 3.7ms | GC: 0.1ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 11.1ms | GC: 0.2ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | GC: 0.5ms)
Completed 200 OK in 69ms (Views: 12.4ms | ActiveRecord: 0.6ms (17 queries, 4 cached) | GC: 0.6ms)


Started PATCH "/books/1/pages/4" for ::1 at 2024-11-21 13:21:32 +0800
Processing by PagesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "leaf"=>{"title"=>"Untitled"}, "book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
[ActiveJob] Enqueued Turbo::Streams::BroadcastJob (Job ID: f76cf877-f445-46e2-ac78-2f451a08f995) to Async(default) with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015f0722f8 @uri=#<URI::GID gid://writebook/Leaf/4>>, :user=>#<GlobalID:0x000000015f071e98 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] ↳ app/controllers/leafables_controller.rb:66:in `broadcast_being_edited_indicator'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:39:in `block in update_without_recording_edit'
  [1m[36mEdit Load (0.1ms)[0m  [1m[34mSELECT "edits".* FROM "edits" WHERE "edits"."leaf_id" = ? ORDER BY "edits"."id" DESC LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:39:in `block in update_without_recording_edit'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:36:in `update_without_recording_edit'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[35m (0.3ms)[0m  [1m[33mupdate leaf_search_index set title = 'Untitled', content = '' where rowid = 4[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:67:in `update_in_search_index'
  Rendering pages/update.turbo_stream.erb
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_leaf.html.erb (Duration: 2.3ms | GC: 0.0ms)
  Rendered pages/update.turbo_stream.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 89ms (Views: 4.4ms | ActiveRecord: 1.3ms (14 queries, 2 cached) | GC: 1.3ms)


[ActiveJob] [Turbo::Streams::BroadcastJob] [f76cf877-f445-46e2-ac78-2f451a08f995]   [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [f76cf877-f445-46e2-ac78-2f451a08f995]   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [f76cf877-f445-46e2-ac78-2f451a08f995] Performing Turbo::Streams::BroadcastJob (Job ID: f76cf877-f445-46e2-ac78-2f451a08f995) from Async(default) enqueued at 2024-11-21T05:21:32.208567000Z with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015ee114f0 @uri=#<URI::GID gid://writebook/Leaf/4>>, :user=>#<GlobalID:0x000000015ee11090 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] [Turbo::Streams::BroadcastJob] [f76cf877-f445-46e2-ac78-2f451a08f995]   Rendered leaves/_being_edited_by.turbo_stream.erb (Duration: 0.5ms | GC: 0.0ms)
[ActiveJob] [Turbo::Streams::BroadcastJob] [f76cf877-f445-46e2-ac78-2f451a08f995] [ActionCable] Broadcasting to Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited: "<turbo-stream action=\"append\" target=\"being_edited_leaf_4\"><template>\n  <div id=\"being_edited_by_user_1\" class=\"flex-inline align-center justify-center margin-block-end-double txt-medium gap being-edited-by\" data-controller=\"autoremove\" data-action=\"animationend-&gt;autoremove#remove...
[ActiveJob] [Turbo::Streams::BroadcastJob] [f76cf877-f445-46e2-ac78-2f451a08f995] Error performing Turbo::Streams::BroadcastJob (Job ID: f76cf877-f445-46e2-ac78-2f451a08f995) from Async(default) in 13.78ms: Redis::CannotConnectError (Connection refused - connect(2) for 127.0.0.1:6379 (redis://localhost:6379/1)):
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `__connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:60:in `connect_internal'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:141:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:647:in `block in tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `each'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `foreach'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:637:in `tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:119:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:51:in `initialize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `new'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `block in connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/middlewares.rb:12:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:745:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:732:in `raw_connection'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:697:in `ensure_connected'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:292:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/client.rb:90:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:152:in `block in send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `synchronize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/commands/pubsub.rb:8:in `publish'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/redis.rb:29:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/channel_prefix.rb:10:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:56:in `block in broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:54:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:32:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:101:in `broadcast_stream_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:89:in `broadcast_render_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/jobs/turbo/streams/broadcast_job.rb:7:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:68:in `block in _perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/i18n-1.14.6/lib/i18n.rb:353:in `with_locale'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/core_ext/time/zones.rb:65:in `use_zone'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:67:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:32:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:51:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:13:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:40:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:39:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:11:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `block in tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:38:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/broadcast_logger.rb:241:in `method_missing'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:39:in `tag_logger'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:29:in `block in execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:79:in `block (4 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:77:in `block in wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:74:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:78:in `block (3 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:27:in `execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in `run_task'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in `block (3 levels) in create_worker'
<internal:kernel>:187:in `loop'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in `block (2 levels) in create_worker'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `catch'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `block in create_worker'
Started GET "/books.json" for ::1 at 2024-11-21 13:21:33 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 2.8ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:21:35 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.9ms | GC: 4.2ms)
Completed 200 OK in 43ms (Views: 9.8ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 4.2ms)


Started GET "/1/the-writebook-manual/4/untitled" for ::1 at 2024-11-21 13:21:44 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"4", "slug"=>"untitled"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.4ms | GC: 0.3ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 3.1ms | GC: 0.3ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 3.4ms | GC: 0.3ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 0.6ms | GC: 0.1ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 8.5ms | GC: 0.7ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | GC: 0.7ms)
Completed 200 OK in 64ms (Views: 9.4ms | ActiveRecord: 0.5ms (17 queries, 4 cached) | GC: 0.7ms)


Started GET "/assets/arrow-reverse-eb2adb1c.svg" for ::1 at 2024-11-21 13:21:44 +0800
Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:21:45 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [4 times] (Duration: 9.6ms | GC: 0.7ms)
  Rendered books/show.html.erb within layouts/application (Duration: 18.3ms | GC: 1.1ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | GC: 1.1ms)
Completed 200 OK in 74ms (Views: 19.0ms | ActiveRecord: 0.7ms (33 queries, 18 cached) | GC: 1.2ms)


Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:21:46 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 33ms (ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/1/the-writebook-manual/3/users-readers-writers" for ::1 at 2024-11-21 13:21:46 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"3", "slug"=>"users-readers-writers"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 3], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 2.2ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.4ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 7.0ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | GC: 0.0ms)
Completed 200 OK in 70ms (Views: 8.7ms | ActiveRecord: 0.6ms (17 queries, 4 cached) | GC: 0.0ms)


Started GET "/1/the-writebook-manual/4/untitled" for ::1 at 2024-11-21 13:21:46 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"4", "slug"=>"untitled"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 2.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.8ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 6.3ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 7.2ms | ActiveRecord: 0.5ms (17 queries, 4 cached) | GC: 0.0ms)


Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:21:47 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
Started GET "/1/the-writebook-manual/4/untitled" for ::1 at 2024-11-21 13:21:47 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"4", "slug"=>"untitled"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 78ms (ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 2.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 4.6ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 4.5ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 10.9ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | GC: 0.0ms)
Completed 200 OK in 162ms (Views: 11.9ms | ActiveRecord: 0.5ms (17 queries, 4 cached) | GC: 14.3ms)


Started GET "/1/the-writebook-manual/4/untitled" for ::1 at 2024-11-21 13:21:47 +0800
Processing by LeafablesController#show as HTML
  Parameters: {"book_id"=>"1", "book_slug"=>"the-writebook-manual", "id"=>"4", "slug"=>"untitled"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  Rendering layout layouts/application.html.erb
  Rendering leafables/show.html.erb within layouts/application
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered books/searches/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_banner.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered leaves/_header.html.erb (Duration: 2.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 4.1ms | GC: 0.0ms)
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered leafables/show.html.erb within layouts/application (Duration: 10.0ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 11.8ms | ActiveRecord: 0.7ms (17 queries, 4 cached) | GC: 0.0ms)


Started GET "/books/1/pages/4/edit" for ::1 at 2024-11-21 13:21:51 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.1ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 4], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 2.2ms | GC: 0.0ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 2.9ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 1.6ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 4]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 3.9ms | GC: 1.8ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 1.6ms | GC: 0.0ms)
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 3.3ms | GC: 0.4ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 20.6ms | GC: 2.2ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | GC: 2.5ms)
Completed 200 OK in 84ms (Views: 21.6ms | ActiveRecord: 0.9ms (19 queries, 4 cached) | GC: 2.5ms)


Started GET "/assets/text-bold-953efeb6.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/assets/text-italic-a906b710.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/cable" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/assets/text-numbers-7d3f91bd.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/assets/text-image-3378eea7.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/cable" [WebSocket] for ::1 at 2024-11-21 13:21:52 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/channels/application_cable/connection.rb:14:in `find_verified_user'
Registered connection (Z2lkOi8vd3JpdGVib29rL1VzZXIvMQ)
Started GET "/assets/text-quote-6a3e8f94.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/assets/text-code-7f055840.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/assets/text-link-accbcce7.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started GET "/assets/text-bullets-f3ae9010.svg" for ::1 at 2024-11-21 13:21:52 +0800
Started PUT "/books/1/pages/4" for ::1 at 2024-11-21 13:22:01 +0800
Processing by PagesController#update as HTML
  Parameters: {"leaf"=>{"title"=>"Untitled"}, "authenticity_token"=>"[FILTERED]", "page"=>{"body"=>"Helo\r\n\r\nthis is w"}, "book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
[ActiveJob] Enqueued Turbo::Streams::BroadcastJob (Job ID: 2a438f82-78d1-402c-b04e-1e7c6a48220a) to Async(default) with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015ee51190 @uri=#<URI::GID gid://writebook/Leaf/4>>, :user=>#<GlobalID:0x000000015ee50d30 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] ↳ app/controllers/leafables_controller.rb:66:in `broadcast_being_edited_indicator'
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:26:in `last_edit_old?'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mPage Create (0.4ms)[0m  [1m[32mINSERT INTO "pages" ("created_at", "updated_at") VALUES (?, ?) RETURNING "id"[0m  [["created_at", "2024-11-21 05:22:01.980552"], ["updated_at", "2024-11-21 05:22:01.980552"]]
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 5], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mActionText::Markdown Create (0.1ms)[0m  [1m[32mINSERT INTO "action_text_markdowns" ("record_type", "record_id", "name", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["record_type", "Page"], ["record_id", 5], ["name", "body"], ["content", "Helo\r\n\r\nthis is w"], ["created_at", "2024-11-21 05:22:01.983942"], ["updated_at", "2024-11-21 05:22:01.983942"]]
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mEdit Create (0.0ms)[0m  [1m[32mINSERT INTO "edits" ("leaf_id", "leafable_type", "leafable_id", "action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["leaf_id", 4], ["leafable_type", "Page"], ["leafable_id", 4], ["action", "revision"], ["created_at", "2024-11-21 05:22:01.990836"], ["updated_at", "2024-11-21 05:22:01.990836"]]
  ↳ app/models/leaf/editable.rb:49:in `block in update_and_record_edit'
  [1m[36mLeaf Update (0.0ms)[0m  [1m[33mUPDATE "leaves" SET "leafable_id" = ?, "updated_at" = ? WHERE "leaves"."id" = ?[0m  [["leafable_id", 5], ["updated_at", "2024-11-21 05:22:01.991633"], ["id", 4]]
  ↳ app/models/leaf/editable.rb:50:in `block in update_and_record_edit'
  [1m[36mPage Update (0.0ms)[0m  [1m[33mUPDATE "pages" SET "updated_at" = ? WHERE "pages"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:01.986509"], ["id", 5]]
  ↳ app/models/leaf/editable.rb:45:in `update_and_record_edit'
  [1m[36mBook Update (0.0ms)[0m  [1m[33mUPDATE "books" SET "updated_at" = ? WHERE "books"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:01.992157"], ["id", 1]]
  ↳ app/models/leaf/editable.rb:45:in `update_and_record_edit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:45:in `update_and_record_edit'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[35m (0.2ms)[0m  [1m[33mupdate leaf_search_index set title = 'Untitled', content = 'Helo

this is w' where rowid = 4[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:67:in `update_in_search_index'
Completed 204 No Content in 60ms (ActiveRecord: 1.2ms (17 queries, 0 cached) | GC: 1.2ms)


[ActiveJob] [Turbo::Streams::BroadcastJob] [2a438f82-78d1-402c-b04e-1e7c6a48220a]   [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [2a438f82-78d1-402c-b04e-1e7c6a48220a]   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [2a438f82-78d1-402c-b04e-1e7c6a48220a] Performing Turbo::Streams::BroadcastJob (Job ID: 2a438f82-78d1-402c-b04e-1e7c6a48220a) from Async(default) enqueued at 2024-11-21T05:22:01.976629000Z with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015f491c30 @uri=#<URI::GID gid://writebook/Leaf/4>>, :user=>#<GlobalID:0x000000015f4916e0 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] [Turbo::Streams::BroadcastJob] [2a438f82-78d1-402c-b04e-1e7c6a48220a]   Rendered leaves/_being_edited_by.turbo_stream.erb (Duration: 0.3ms | GC: 0.0ms)
[ActiveJob] [Turbo::Streams::BroadcastJob] [2a438f82-78d1-402c-b04e-1e7c6a48220a] [ActionCable] Broadcasting to Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited: "<turbo-stream action=\"append\" target=\"being_edited_leaf_4\"><template>\n  <div id=\"being_edited_by_user_1\" class=\"flex-inline align-center justify-center margin-block-end-double txt-medium gap being-edited-by\" data-controller=\"autoremove\" data-action=\"animationend-&gt;autoremove#remove...
[ActiveJob] [Turbo::Streams::BroadcastJob] [2a438f82-78d1-402c-b04e-1e7c6a48220a] Error performing Turbo::Streams::BroadcastJob (Job ID: 2a438f82-78d1-402c-b04e-1e7c6a48220a) from Async(default) in 4.39ms: Redis::CannotConnectError (Connection refused - connect(2) for 127.0.0.1:6379 (redis://localhost:6379/1)):
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `__connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:60:in `connect_internal'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:141:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:647:in `block in tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `each'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `foreach'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:637:in `tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:119:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:51:in `initialize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `new'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `block in connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/middlewares.rb:12:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:745:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:732:in `raw_connection'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:697:in `ensure_connected'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:292:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/client.rb:90:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:152:in `block in send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `synchronize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/commands/pubsub.rb:8:in `publish'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/redis.rb:29:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/channel_prefix.rb:10:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:56:in `block in broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:54:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:32:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:101:in `broadcast_stream_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:89:in `broadcast_render_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/jobs/turbo/streams/broadcast_job.rb:7:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:68:in `block in _perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/i18n-1.14.6/lib/i18n.rb:353:in `with_locale'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/core_ext/time/zones.rb:65:in `use_zone'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:67:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:32:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:51:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:13:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:40:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:39:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:11:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `block in tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:38:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/broadcast_logger.rb:241:in `method_missing'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:39:in `tag_logger'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:29:in `block in execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:79:in `block (4 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:77:in `block in wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:74:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:78:in `block (3 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:27:in `execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in `run_task'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in `block (3 levels) in create_worker'
<internal:kernel>:187:in `loop'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in `block (2 levels) in create_worker'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `catch'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `block in create_worker'
Started PUT "/books/1/pages/4" for ::1 at 2024-11-21 13:22:05 +0800
Processing by PagesController#update as HTML
  Parameters: {"leaf"=>{"title"=>"Untitled"}, "authenticity_token"=>"[FILTERED]", "page"=>{"body"=>"Helo\r\n\r\nthis is worth reading."}, "book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
[ActiveJob] Enqueued Turbo::Streams::BroadcastJob (Job ID: af13a024-b88a-419f-92c5-4d83b309368f) to Async(default) with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x0000000137d716e8 @uri=#<URI::GID gid://writebook/Leaf/4>>, :user=>#<GlobalID:0x0000000137d70d60 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] ↳ app/controllers/leafables_controller.rb:66:in `broadcast_being_edited_indicator'
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:26:in `last_edit_old?'
  [1m[36mEdit Load (0.0ms)[0m  [1m[34mSELECT "edits".* FROM "edits" WHERE "edits"."leaf_id" = ? ORDER BY "edits"."id" DESC LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:26:in `last_edit_old?'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mActionText::Markdown Load (0.3ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mActionText::Markdown Update (0.0ms)[0m  [1m[33mUPDATE "action_text_markdowns" SET "content" = ?, "updated_at" = ? WHERE "action_text_markdowns"."id" = ?[0m  [["content", "Helo\r\n\r\nthis is worth reading."], ["updated_at", "2024-11-21 05:22:05.176912"], ["id", 4]]
  ↳ app/models/leaf/editable.rb:37:in `block in update_without_recording_edit'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 5], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:37:in `block in update_without_recording_edit'
  [1m[36mLeaf Update (0.0ms)[0m  [1m[33mUPDATE "leaves" SET "updated_at" = ? WHERE "leaves"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:05.178998"], ["id", 4]]
  ↳ app/models/leaf/editable.rb:37:in `block in update_without_recording_edit'
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:37:in `block in update_without_recording_edit'
  [1m[36mEdit Load (0.0ms)[0m  [1m[34mSELECT "edits".* FROM "edits" WHERE "edits"."leaf_id" = ? ORDER BY "edits"."id" DESC LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:39:in `block in update_without_recording_edit'
  [1m[36mEdit Update (0.0ms)[0m  [1m[33mUPDATE "edits" SET "updated_at" = ? WHERE "edits"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:05.180662"], ["id", 1]]
  ↳ app/models/leaf/editable.rb:39:in `block in update_without_recording_edit'
  [1m[36mPage Update (0.0ms)[0m  [1m[33mUPDATE "pages" SET "updated_at" = ? WHERE "pages"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:05.177743"], ["id", 5]]
  ↳ app/models/leaf/editable.rb:36:in `update_without_recording_edit'
  [1m[36mLeaf Update (0.0ms)[0m  [1m[33mUPDATE "leaves" SET "updated_at" = ? WHERE "leaves"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:05.181910"], ["id", 4]]
  ↳ app/models/leaf/editable.rb:36:in `update_without_recording_edit'
  [1m[36mBook Update (0.0ms)[0m  [1m[33mUPDATE "books" SET "updated_at" = ? WHERE "books"."id" = ?[0m  [["updated_at", "2024-11-21 05:22:05.182774"], ["id", 1]]
  ↳ app/models/leaf/editable.rb:36:in `update_without_recording_edit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:36:in `update_without_recording_edit'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[35m (0.3ms)[0m  [1m[33mupdate leaf_search_index set title = 'Untitled', content = 'Helo

this is worth reading.' where rowid = 4[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:67:in `update_in_search_index'
Completed 204 No Content in 73ms (ActiveRecord: 1.2ms (21 queries, 0 cached) | GC: 3.6ms)


[ActiveJob] [Turbo::Streams::BroadcastJob] [af13a024-b88a-419f-92c5-4d83b309368f]   [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [af13a024-b88a-419f-92c5-4d83b309368f]   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [af13a024-b88a-419f-92c5-4d83b309368f] Performing Turbo::Streams::BroadcastJob (Job ID: af13a024-b88a-419f-92c5-4d83b309368f) from Async(default) enqueued at 2024-11-21T05:22:05.171914000Z with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015dd1cdc0 @uri=#<URI::GID gid://writebook/Leaf/4>>, :user=>#<GlobalID:0x000000015dd1b920 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] [Turbo::Streams::BroadcastJob] [af13a024-b88a-419f-92c5-4d83b309368f]   Rendered leaves/_being_edited_by.turbo_stream.erb (Duration: 0.1ms | GC: 0.0ms)
[ActiveJob] [Turbo::Streams::BroadcastJob] [af13a024-b88a-419f-92c5-4d83b309368f] [ActionCable] Broadcasting to Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited: "<turbo-stream action=\"append\" target=\"being_edited_leaf_4\"><template>\n  <div id=\"being_edited_by_user_1\" class=\"flex-inline align-center justify-center margin-block-end-double txt-medium gap being-edited-by\" data-controller=\"autoremove\" data-action=\"animationend-&gt;autoremove#remove...
[ActiveJob] [Turbo::Streams::BroadcastJob] [af13a024-b88a-419f-92c5-4d83b309368f] Error performing Turbo::Streams::BroadcastJob (Job ID: af13a024-b88a-419f-92c5-4d83b309368f) from Async(default) in 3.14ms: Redis::CannotConnectError (Connection refused - connect(2) for 127.0.0.1:6379 (redis://localhost:6379/1)):
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `__connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:60:in `connect_internal'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:141:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:647:in `block in tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `each'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `foreach'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:637:in `tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:119:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:51:in `initialize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `new'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `block in connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/middlewares.rb:12:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:745:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:732:in `raw_connection'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:697:in `ensure_connected'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:292:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/client.rb:90:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:152:in `block in send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `synchronize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/commands/pubsub.rb:8:in `publish'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/redis.rb:29:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/channel_prefix.rb:10:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:56:in `block in broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:54:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:32:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:101:in `broadcast_stream_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:89:in `broadcast_render_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/jobs/turbo/streams/broadcast_job.rb:7:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:68:in `block in _perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/i18n-1.14.6/lib/i18n.rb:353:in `with_locale'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/core_ext/time/zones.rb:65:in `use_zone'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:67:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:32:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:51:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:13:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:40:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:39:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:11:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `block in tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:38:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/broadcast_logger.rb:241:in `method_missing'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:39:in `tag_logger'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:29:in `block in execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:79:in `block (4 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:77:in `block in wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:74:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:78:in `block (3 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:27:in `execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in `run_task'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in `block (3 levels) in create_worker'
<internal:kernel>:187:in `loop'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in `block (2 levels) in create_worker'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `catch'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `block in create_worker'
Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:22:07 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 2.0ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 2.2ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [4 times] (Duration: 7.3ms | GC: 0.0ms)
  Rendered books/show.html.erb within layouts/application (Duration: 19.1ms | GC: 0.9ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.9ms | GC: 0.9ms)
Completed 200 OK in 77ms (Views: 19.7ms | ActiveRecord: 0.6ms (33 queries, 18 cached) | GC: 0.9ms)


Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"IloybGtPaTh2ZDNKcGRHVmliMjlyTDB4bFlXWXZOQTpiZWluZ19lZGl0ZWQi--3c9195983a3d654e7fa12d83fd102b59c1a240a0154324384490fe6730d9b47a"}
Turbo::StreamsChannel stopped streaming from Z2lkOi8vd3JpdGVib29rL0xlYWYvNA:being_edited
Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:22:07 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 30ms (ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/books/1/pages/4/edit" for ::1 at 2024-11-21 13:22:08 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 5], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 1.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.2ms | GC: 0.0ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 8.2ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | GC: 0.0ms)
Completed 200 OK in 70ms (Views: 9.9ms | ActiveRecord: 0.6ms (19 queries, 4 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:22:09 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.3ms | GC: 0.0ms)
Completed 200 OK in 59ms (Views: 7.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:22:28 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.0ms | GC: 1.7ms)
Completed 200 OK in 58ms (Views: 7.9ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 5.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:22:29 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.4ms | GC: 0.4ms)
Completed 200 OK in 54ms (Views: 6.1ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:22:30 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.6ms | GC: 1.3ms)
Completed 200 OK in 55ms (Views: 7.5ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.3ms)


Started GET "/books/1/pages/3/edit" for ::1 at 2024-11-21 13:22:34 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"3"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 3], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 3.4ms | GC: 0.0ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 3], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 3.7ms | GC: 1.6ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 10.9ms | GC: 1.6ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | GC: 2.1ms)
Completed 200 OK in 74ms (Views: 12.1ms | ActiveRecord: 0.7ms (19 queries, 4 cached) | GC: 2.1ms)


Started GET "/books/1/pages/4/edit" for ::1 at 2024-11-21 13:22:34 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 5], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.2ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 2.2ms | GC: 0.4ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.3ms | GC: 0.2ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 3.7ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 10.8ms | GC: 0.7ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | GC: 0.8ms)
Completed 200 OK in 77ms (Views: 11.9ms | ActiveRecord: 0.6ms (19 queries, 4 cached) | GC: 1.5ms)


Started GET "/books/1/pages/4/edit" for ::1 at 2024-11-21 13:22:37 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 5], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 2.7ms | GC: 0.1ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 4], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 3.1ms | GC: 0.4ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 4], [nil, 4.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 8.4ms | GC: 0.5ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | GC: 0.5ms)
Completed 200 OK in 65ms (Views: 9.0ms | ActiveRecord: 0.5ms (19 queries, 4 cached) | GC: 0.7ms)


Started GET "/books/1/pages/3/edit" for ::1 at 2024-11-21 13:22:38 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"3"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 3], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 3], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.0ms | GC: 0.0ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 2.2ms | GC: 1.4ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 8.0ms | GC: 1.4ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | GC: 1.4ms)
Completed 200 OK in 69ms (Views: 8.5ms | ActiveRecord: 0.5ms (19 queries, 4 cached) | GC: 1.4ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:23:01 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 1.8ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [4 times] (Duration: 7.6ms | GC: 0.2ms)
  Rendered books/show.html.erb within layouts/application (Duration: 15.0ms | GC: 0.4ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | GC: 0.7ms)
Completed 200 OK in 72ms (Views: 16.7ms | ActiveRecord: 0.6ms (33 queries, 18 cached) | GC: 0.9ms)


Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"IloybGtPaTh2ZDNKcGRHVmliMjlyTDB4bFlXWXZNdzpiZWluZ19lZGl0ZWQi--0c31bed6303b455d377ca636657b899ac20193f9ac8ac199696682a0bf4d4222"}
Turbo::StreamsChannel stopped streaming from Z2lkOi8vd3JpdGVib29rL0xlYWYvMw:being_edited
Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:23:01 +0800
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 31ms (ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/books/1/pages/3/edit" for ::1 at 2024-11-21 13:23:02 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"3"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 3], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 3], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 3], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.1ms | GC: 0.0ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 7.8ms | ActiveRecord: 0.6ms (19 queries, 4 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:23:08 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.5ms | GC: 1.6ms)
Completed 200 OK in 55ms (Views: 8.4ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.6ms)


Started PUT "/books/1/pages/3" for ::1 at 2024-11-21 13:23:08 +0800
Processing by PagesController#update as HTML
  Parameters: {"leaf"=>{"title"=>"Users, Readers & Writers"}, "authenticity_token"=>"[FILTERED]", "page"=>{"body"=>"# Users, Readers & Writers\r\n\r\nYou can use Writebook alone, or invite others to publish with you. Users invited to Writebook can read books that are private to just your team, create their own books, or you can choose which books they can contribute to.\r\n\r\n  ![users.png](/u/users-GdhgKg.png)\r\n\r\n## Inviting people\r\nYour Writebook has a special join link you can share with people. When they hit the link they will be asked to enter their name, email address, and set a password for their account. Once they do, they'll be immediately signed in.\r\n\r\nYou can find the join link by hitting the people button on the index of books. There you'll see the special URL which you can share via QR code or copy it to paste into an email, text, and chat.\r\n\r\n## Administrators\r\n\r\nHit the _Crown_ button next to a person to designate them as an _Administrator_. Admins have access to every book on the account and can do things like remove people from the account, help them get back in if they forget their password, and regenerate the join URL if it falls into the wrong hands.\r\n\r\n## Book Permissions\r\nFor each book there are readers and writers. When you create a book you'll have the chance to choose who on the account can read it and who has permission to edit it.\r\n\r\n ![book-permissions.png](/u/book-permissions-QQFdnG.png)\r\n\r\n### Readers\r\nReaders can see the book but can't make any edits or change any settings. They must be signed in to read it if the book isn't available on the public internet. More on that in a later chapter.\r\n\r\n### Writers\r\nWriters all have full permission to read, edit, and change anything in the book. They can change the title, author, cover and any text or pictures. Admins are always writers.\r\n\r\n### Everyone\r\nFlip the _Everyone_ switch to give everyone on the account read access to the book—this includes anyone who joins the account later. This setting is ideal for something like a company handbook that you want everyone on your team to instantly have access to. You can give writer access to individuals even when everyone is on.\r\n"}, "book_id"=>"1", "id"=>"3"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
[ActiveJob] Enqueued Turbo::Streams::BroadcastJob (Job ID: 09c85dc3-070a-44f4-9b16-eff9ac089f24) to Async(default) with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvMw:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015d8b6740 @uri=#<URI::GID gid://writebook/Leaf/3>>, :user=>#<GlobalID:0x000000015d8b60b0 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] ↳ app/controllers/leafables_controller.rb:66:in `broadcast_being_edited_indicator'
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 3], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:26:in `last_edit_old?'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mPage Create (0.4ms)[0m  [1m[32mINSERT INTO "pages" ("created_at", "updated_at") VALUES (?, ?) RETURNING "id"[0m  [["created_at", "2024-11-21 05:23:09.070020"], ["updated_at", "2024-11-21 05:23:09.070020"]]
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 6], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mActionText::Markdown Create (0.0ms)[0m  [1m[32mINSERT INTO "action_text_markdowns" ("record_type", "record_id", "name", "content", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["record_type", "Page"], ["record_id", 6], ["name", "body"], ["content", "# Users, Readers & Writers\r\n\r\nYou can use Writebook alone, or invite others to publish with you. Users invited to Writebook can read books that are private to just your team, create their own books, or you can choose which books they can contribute to.\r\n\r\n  ![users.png](/u/users-GdhgKg.png)\r\n\r\n## Inviting people\r\nYour Writebook has a special join link you can share with people. When they hit the link they will be asked to enter their name, email address, and set a password for their account. Once they do, they'll be immediately signed in.\r\n\r\nYou can find the join link by hitting the people button on the index of books. There you'll see the special URL which you can share via QR code or copy it to paste into an email, text, and chat.\r\n\r\n## Administrators\r\n\r\nHit the _Crown_ button next to a person to designate them as an _Administrator_. Admins have access to every book on the account and can do things like remove people from the account, help them get back in if they forget their password, and regenerate the join URL if it falls into the wrong hands.\r\n\r\n## Book Permissions\r\nFor each book there are readers and writers. When you create a book you'll have the chance to choose who on the account can read it and who has permission to edit it.\r\n\r\n ![book-permissions.png](/u/book-permissions-QQFdnG.png)\r\n\r\n### Readers\r\nReaders can see the book but can't make any edits or change any settings. They must be signed in to read it if the book isn't available on the public internet. More on that in a later chapter.\r\n\r\n### Writers\r\nWriters all have full permission to read, edit, and change anything in the book. They can change the title, author, cover and any text or pictures. Admins are always writers.\r\n\r\n### Everyone\r\nFlip the _Everyone_ switch to give everyone on the account read access to the book—this includes anyone who joins the account later. This setting is ideal for something like a company handbook that you want everyone on your team to instantly have access to. You can give writer access to individuals even when everyone is on.\r\n"], ["created_at", "2024-11-21 05:23:09.071541"], ["updated_at", "2024-11-21 05:23:09.071541"]]
  ↳ app/models/leaf/editable.rb:47:in `block in update_and_record_edit'
  [1m[36mEdit Create (0.0ms)[0m  [1m[32mINSERT INTO "edits" ("leaf_id", "leafable_type", "leafable_id", "action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["leaf_id", 3], ["leafable_type", "Page"], ["leafable_id", 3], ["action", "revision"], ["created_at", "2024-11-21 05:23:09.072852"], ["updated_at", "2024-11-21 05:23:09.072852"]]
  ↳ app/models/leaf/editable.rb:49:in `block in update_and_record_edit'
  [1m[36mLeaf Update (0.0ms)[0m  [1m[33mUPDATE "leaves" SET "leafable_id" = ?, "updated_at" = ? WHERE "leaves"."id" = ?[0m  [["leafable_id", 6], ["updated_at", "2024-11-21 05:23:09.074476"], ["id", 3]]
  ↳ app/models/leaf/editable.rb:50:in `block in update_and_record_edit'
  [1m[36mPage Update (0.0ms)[0m  [1m[33mUPDATE "pages" SET "updated_at" = ? WHERE "pages"."id" = ?[0m  [["updated_at", "2024-11-21 05:23:09.072232"], ["id", 6]]
  ↳ app/models/leaf/editable.rb:45:in `update_and_record_edit'
  [1m[36mBook Update (0.0ms)[0m  [1m[33mUPDATE "books" SET "updated_at" = ? WHERE "books"."id" = ?[0m  [["updated_at", "2024-11-21 05:23:09.075517"], ["id", 1]]
  ↳ app/models/leaf/editable.rb:45:in `update_and_record_edit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/editable.rb:45:in `update_and_record_edit'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[35m (0.3ms)[0m  [1m[33mupdate leaf_search_index set title = 'Users, Readers & Writers', content = 'Users, Readers & Writers

You can use Writebook alone, or invite others to publish with you. Users invited to Writebook can read books that are private to just your team, create their own books, or you can choose which books they can contribute to.



Inviting peopleYour Writebook has a special join link you can share with people. When they hit the link they will be asked to enter their name, email address, and set a password for their account. Once they do, they''ll be immediately signed in.

You can find the join link by hitting the people button on the index of books. There you''ll see the special URL which you can share via QR code or copy it to paste into an email, text, and chat.

AdministratorsHit the Crown button next to a person to designate them as an Administrator. Admins have access to every book on the account and can do things like remove people from the account, help them get back in if they forget their password, and regenerate the join URL if it falls into the wrong hands.

Book PermissionsFor each book there are readers and writers. When you create a book you''ll have the chance to choose who on the account can read it and who has permission to edit it.



ReadersReaders can see the book but can''t make any edits or change any settings. They must be signed in to read it if the book isn''t available on the public internet. More on that in a later chapter.

WritersWriters all have full permission to read, edit, and change anything in the book. They can change the title, author, cover and any text or pictures. Admins are always writers.

EveryoneFlip the Everyone switch to give everyone on the account read access to the book—this includes anyone who joins the account later. This setting is ideal for something like a company handbook that you want everyone on your team to instantly have access to. You can give writer access to individuals even when everyone is on.' where rowid = 3[0m
  ↳ app/models/leaf/searchable.rb:80:in `execute_sql_with_binds'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/leaf/searchable.rb:67:in `update_in_search_index'
Completed 204 No Content in 71ms (ActiveRecord: 1.3ms (17 queries, 0 cached) | GC: 0.9ms)


[ActiveJob] [Turbo::Streams::BroadcastJob] [09c85dc3-070a-44f4-9b16-eff9ac089f24]   [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [09c85dc3-070a-44f4-9b16-eff9ac089f24]   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [Turbo::Streams::BroadcastJob] [09c85dc3-070a-44f4-9b16-eff9ac089f24] Performing Turbo::Streams::BroadcastJob (Job ID: 09c85dc3-070a-44f4-9b16-eff9ac089f24) from Async(default) enqueued at 2024-11-21T05:23:09.066875000Z with arguments: "Z2lkOi8vd3JpdGVib29rL0xlYWYvMw:being_edited", {:partial=>"leaves/being_edited_by", :locals=>{:leaf=>#<GlobalID:0x000000015e130948 @uri=#<URI::GID gid://writebook/Leaf/3>>, :user=>#<GlobalID:0x000000015e8be868 @uri=#<URI::GID gid://writebook/User/1>>}}
[ActiveJob] [Turbo::Streams::BroadcastJob] [09c85dc3-070a-44f4-9b16-eff9ac089f24]   Rendered leaves/_being_edited_by.turbo_stream.erb (Duration: 0.1ms | GC: 0.0ms)
[ActiveJob] [Turbo::Streams::BroadcastJob] [09c85dc3-070a-44f4-9b16-eff9ac089f24] [ActionCable] Broadcasting to Z2lkOi8vd3JpdGVib29rL0xlYWYvMw:being_edited: "<turbo-stream action=\"append\" target=\"being_edited_leaf_3\"><template>\n  <div id=\"being_edited_by_user_1\" class=\"flex-inline align-center justify-center margin-block-end-double txt-medium gap being-edited-by\" data-controller=\"autoremove\" data-action=\"animationend-&gt;autoremove#remove...
[ActiveJob] [Turbo::Streams::BroadcastJob] [09c85dc3-070a-44f4-9b16-eff9ac089f24] Error performing Turbo::Streams::BroadcastJob (Job ID: 09c85dc3-070a-44f4-9b16-eff9ac089f24) from Async(default) in 4.07ms: Redis::CannotConnectError (Connection refused - connect(2) for 127.0.0.1:6379 (redis://localhost:6379/1)):
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `__connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:1219:in `connect_nonblock'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:60:in `connect_internal'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:141:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:647:in `block in tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `each'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:231:in `foreach'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/3.3.0/socket.rb:637:in `tcp'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:119:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/ruby_connection.rb:51:in `initialize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `new'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:746:in `block in connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client/middlewares.rb:12:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:745:in `connect'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:732:in `raw_connection'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:697:in `ensure_connected'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-client-0.22.2/lib/redis_client.rb:292:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/client.rb:90:in `call_v'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:152:in `block in send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `synchronize'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis.rb:151:in `send_command'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/redis-5.3.0/lib/redis/commands/pubsub.rb:8:in `publish'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/redis.rb:29:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/subscription_adapter/channel_prefix.rb:10:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:56:in `block in broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:54:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/actioncable/lib/action_cable/server/broadcasting.rb:32:in `broadcast'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:101:in `broadcast_stream_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/channels/turbo/streams/broadcasts.rb:89:in `broadcast_render_to'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.11/app/jobs/turbo/streams/broadcast_job.rb:7:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:68:in `block in _perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/i18n-1.14.6/lib/i18n.rb:353:in `with_locale'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/core_ext/time/zones.rb:65:in `use_zone'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:67:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:32:in `_perform_job'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:51:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:13:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:40:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/notifications.rb:210:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:39:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activerecord/lib/active_record/railties/job_runtime.rb:11:in `instrument'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/instrumentation.rb:26:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `block in perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `block in tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:38:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/tagged_logging.rb:143:in `tagged'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/broadcast_logger.rb:241:in `method_missing'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:39:in `tag_logger'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/logging.rb:32:in `perform_now'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:29:in `block in execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:79:in `block (4 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:77:in `block in wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/reloader.rb:74:in `wrap'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/railtie.rb:78:in `block (3 levels) in <class:Railtie>'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/execution.rb:27:in `execute'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/bundler/gems/rails-13d5f8720892/activejob/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in `run_task'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in `block (3 levels) in create_worker'
<internal:kernel>:187:in `loop'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in `block (2 levels) in create_worker'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `catch'
/Users/michael/.rbenv/versions/3.3.5/lib/ruby/gems/3.3.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in `block in create_worker'
Started GET "/books/1.json" for ::1 at 2024-11-21 13:23:37 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.2ms | GC: 1.4ms)
Completed 200 OK in 58ms (Views: 9.1ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.5ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:23:45 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.3ms | GC: 2.5ms)
Completed 200 OK in 57ms (Views: 9.2ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 2.5ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:26:42 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/session.rb:16:in `resume'
  [1m[36mSession Update (0.3ms)[0m  [1m[33mUPDATE "sessions" SET "last_active_at" = ?, "updated_at" = ? WHERE "sessions"."id" = ?[0m  [["last_active_at", "2024-11-21 05:26:42.708955"], ["updated_at", "2024-11-21 05:26:42.709243"], ["id", 1]]
  ↳ app/models/session.rb:16:in `resume'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/session.rb:16:in `resume'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.9ms | GC: 0.4ms)
Completed 200 OK in 40ms (Views: 6.8ms | ActiveRecord: 1.0ms (16 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:27:44 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 10.3ms | GC: 2.1ms)
Completed 200 OK in 52ms (Views: 10.1ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 2.1ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:27:47 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.2ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 44ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:27:47 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.8ms | GC: 0.5ms)
Completed 200 OK in 39ms (Views: 7.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:27:58 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.3ms | GC: 0.8ms)
Completed 200 OK in 38ms (Views: 5.2ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.8ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:28:03 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.1ms | GC: 1.3ms)
Completed 200 OK in 36ms (Views: 6.0ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:28:03 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.3ms | GC: 1.0ms)
Completed 200 OK in 36ms (Views: 5.2ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:28:03 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.7ms | GC: 0.6ms)
Completed 200 OK in 40ms (Views: 5.5ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:28:59 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.8ms | GC: 0.0ms)
Completed 200 OK in 53ms (Views: 6.6ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:29:26 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.8ms | GC: 0.8ms)
Completed 200 OK in 39ms (Views: 5.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:29:29 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.3ms | GC: 0.3ms)
Completed 200 OK in 56ms (Views: 7.1ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:31:15 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.7ms | GC: 0.0ms)
Completed 200 OK in 47ms (Views: 5.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:31:15 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.2ms | GC: 1.4ms)
Completed 200 OK in 41ms (Views: 7.0ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 2.6ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:31:55 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 1.4ms | GC: 0.1ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 5]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [4 times] (Duration: 8.6ms | GC: 0.5ms)
  Rendered books/show.html.erb within layouts/application (Duration: 16.3ms | GC: 0.7ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | GC: 0.7ms)
Completed 200 OK in 70ms (Views: 17.0ms | ActiveRecord: 0.7ms (33 queries, 18 cached) | GC: 0.8ms)


Started GET "/books/1/pages/3/edit" for ::1 at 2024-11-21 13:32:52 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"3"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 6], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 1.1ms | GC: 0.5ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 2.6ms | GC: 0.5ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 3], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 2.9ms | GC: 0.5ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 1.8ms | GC: 0.3ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 3], [nil, 3.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 9.5ms | GC: 1.3ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | GC: 1.5ms)
Completed 200 OK in 55ms (Views: 10.4ms | ActiveRecord: 0.8ms (19 queries, 4 cached) | GC: 3.1ms)


Finished "/cable" [WebSocket] for ::1 at 2024-11-21 13:32:52 +0800
Turbo::StreamsChannel stopped streaming from Z2lkOi8vd3JpdGVib29rL0xlYWYvMw:being_edited
Started GET "/assets/history-633192ea.svg" for ::1 at 2024-11-21 13:32:52 +0800
Started GET "/cable" for ::1 at 2024-11-21 13:32:52 +0800
Started GET "/cable" [WebSocket] for ::1 at 2024-11-21 13:32:52 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/channels/application_cable/connection.rb:14:in `find_verified_user'
Registered connection (Z2lkOi8vd3JpdGVib29rL1VzZXIvMQ)
Started GET "/manifest.json" for ::1 at 2024-11-21 13:32:52 +0800
Processing by Rails::PwaController#manifest as JSON
  Rendering pwa/manifest.json.erb
  Rendered pwa/manifest.json.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 0.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:35:23 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.5ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 5.4ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:35:23 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.2ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 31ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:35:26 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.0ms | GC: 1.4ms)
Completed 200 OK in 56ms (Views: 7.8ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 3.1ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:35:50 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.2ms | GC: 0.2ms)
Completed 200 OK in 36ms (Views: 5.1ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:04 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 45ms (Views: 6.3ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:14 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.6ms | GC: 2.6ms)
Completed 200 OK in 42ms (Views: 7.5ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 2.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:18 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.2ms | GC: 0.5ms)
Completed 200 OK in 69ms (Views: 7.0ms | ActiveRecord: 0.7ms (14 queries, 0 cached) | GC: 1.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:21 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.1ms | GC: 0.5ms)
Completed 200 OK in 42ms (Views: 6.0ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:22 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.8ms | GC: 1.4ms)
Completed 200 OK in 41ms (Views: 5.9ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:23 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.8ms | GC: 1.3ms)
Completed 200 OK in 59ms (Views: 7.6ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 2.2ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:23 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.6ms | GC: 0.3ms)
Completed 200 OK in 60ms (Views: 6.5ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:24 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.9ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 4.9ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:40 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.7ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.9ms | GC: 1.4ms)
Completed 200 OK in 73ms (Views: 6.8ms | ActiveRecord: 1.0ms (14 queries, 0 cached) | GC: 2.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:36:40 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.9ms | GC: 0.2ms)
Completed 200 OK in 38ms (Views: 5.5ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:37:07 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.6ms | GC: 0.4ms)
Completed 200 OK in 36ms (Views: 4.6ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:37:08 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.2ms | GC: 1.9ms)
Completed 200 OK in 40ms (Views: 7.0ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.9ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:37:10 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.8ms | GC: 0.5ms)
Completed 200 OK in 46ms (Views: 6.3ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.1ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:37:11 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.6ms | GC: 0.5ms)
Completed 200 OK in 36ms (Views: 5.4ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.5ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:37:37 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.8ms | GC: 0.0ms)
Completed 200 OK in 59ms (Views: 5.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.0ms)


Started GET "/1/the-writebook-manual" for ::1 at 2024-11-21 13:37:40 +0800
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1", "slug"=>"the-writebook-manual"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering layout layouts/application.html.erb
  Rendering books/show.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.html.erb:7
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["LIMIT", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ?[0m  [["id", 1]]
  ↳ app/helpers/books_helper.rb:26:in `link_to_first_leafable'
  Rendered books/searches/_form.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/publications/_publication.html.erb (Duration: 0.4ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered books/_create_buttons.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered books/_mode_buttons.html.erb (Duration: 0.0ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 5]]
  ↳ app/views/books/show.html.erb:115
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_delete.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered collection of leaves/_leaf.html.erb [4 times] (Duration: 6.9ms | GC: 0.4ms)
  Rendered books/show.html.erb within layouts/application (Duration: 14.1ms | GC: 1.8ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | GC: 1.8ms)
Completed 200 OK in 63ms (Views: 14.9ms | ActiveRecord: 0.5ms (33 queries, 18 cached) | GC: 1.8ms)


Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"IloybGtPaTh2ZDNKcGRHVmliMjlyTDB4bFlXWXZNdzpiZWluZ19lZGl0ZWQi--0c31bed6303b455d377ca636657b899ac20193f9ac8ac199696682a0bf4d4222"}
Turbo::StreamsChannel stopped streaming from Z2lkOi8vd3JpdGVib29rL0xlYWYvMw:being_edited
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:37:40 +0800
Started GET "/u/users-GdhgKg.png" for ::1 at 2024-11-21 13:37:40 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
Processing by ActionText::Markdown::UploadsController#show as PNG
  Parameters: {"slug"=>"users-GdhgKg"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.1ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 75ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."slug" = ? LIMIT ?[0m  [["slug", "users-GdhgKg.png"], ["LIMIT", 1]]
  ↳ app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Completed 404 Not Found in 71ms (ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find ActiveStorage::Attachment with [WHERE "active_storage_attachments"."slug" = ?]):
  
app/controllers/action_text/markdown/uploads_controller.rb:21:in `show'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg?disposition=attachment" for ::1 at 2024-11-21 13:37:43 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"disposition"=>"attachment", "signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.2ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cIndyaXRlYm9vay1tYW51YWwuanBnXCI7IGZpbGVuYW1lKj1VVEYtOCcnd3JpdGVib29rLW1hbnVhbC5qcGciLCJjb250ZW50X3R5cGUiOiJpbWFnZS9qcGVnIiwic2VydmljZV9uYW1lIjoibG9jYWwifSwicHVyIjoiYmxvYl9rZXkifX0=--0750dec5552bc7f3fcf8ac73dfc5f846edf6f73f/writebook-manual.jpg)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cIndyaXRlYm9vay1tYW51YWwuanBnXCI7IGZpbGVuYW1lKj1VVEYtOCcnd3JpdGVib29rLW1hbnVhbC5qcGciLCJjb250ZW50X3R5cGUiOiJpbWFnZS9qcGVnIiwic2VydmljZV9uYW1lIjoibG9jYWwifSwicHVyIjoiYmxvYl9rZXkifX0=--0750dec5552bc7f3fcf8ac73dfc5f846edf6f73f/writebook-manual.jpg
Completed 302 Found in 56ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJhdHRhY2htZW50OyBmaWxlbmFtZT1cIndyaXRlYm9vay1tYW51YWwuanBnXCI7IGZpbGVuYW1lKj1VVEYtOCcnd3JpdGVib29rLW1hbnVhbC5qcGciLCJjb250ZW50X3R5cGUiOiJpbWFnZS9qcGVnIiwic2VydmljZV9uYW1lIjoibG9jYWwifSwicHVyIjoiYmxvYl9rZXkifX0=--0750dec5552bc7f3fcf8ac73dfc5f846edf6f73f/writebook-manual.jpg" for ::1 at 2024-11-21 13:37:43 +0800
Processing by ActiveStorage::DiskController#show as JPEG
  Parameters: {"encoded_key"=>"[FILTERED]", "filename"=>"writebook-manual"}
Completed 200 OK in 33ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1/edit" for ::1 at 2024-11-21 13:37:45 +0800
Processing by BooksController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering books/edit.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/_form.html.erb:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/_form.html.erb:25
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = ? ORDER BY "users"."name" ASC[0m  [["active", 1]]
  ↳ app/views/books/_form.html.erb:81
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mAccess Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:24:in `accessable?'
  Rendered collection of books/accesses/_access.html.erb [1 times] (Duration: 2.4ms | GC: 0.0ms)
  Rendered books/_form.html.erb (Duration: 8.3ms | GC: 0.0ms)
  Rendered books/edit.html.erb within layouts/application (Duration: 9.9ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | GC: 0.0ms)
Completed 200 OK in 70ms (Views: 11.3ms | ActiveRecord: 0.4ms (10 queries, 1 cached) | GC: 0.0ms)


Started GET "/books/1/pages/2/edit" for ::1 at 2024-11-21 13:39:07 +0800
Processing by PagesController#edit as HTML
  Parameters: {"book_id"=>"1", "id"=>"2"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:11:in `set_book'
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" = ? LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:15:in `set_leaf'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/concerns/set_book_leaf.rb:19:in `set_leafable'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering pages/edit.html.erb within layouts/application
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."leafable_id" = ? AND "leaves"."leafable_type" = ? LIMIT ?[0m  [["leafable_id", 2], ["leafable_type", "Page"], ["LIMIT", 1]]
  ↳ app/models/leafable.rb:10:in `title'
  Rendered leaves/_sidebar_toggle.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score < ?) ORDER BY "leaves"."position_score" DESC, "leaves"."id" DESC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:36:in `previous'
  Rendered books/_index_link.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered books/searches/_form.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered books/searches/_search.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered leafables/_edit_header.html.erb (Duration: 1.5ms | GC: 0.2ms)
  Rendered books/_edit_mode.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered pages/_house_toolbar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mEdit Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "edits" WHERE "edits"."leaf_id" = ? LIMIT ?[0m  [["leaf_id", 2], ["LIMIT", 1]]
  ↳ app/views/leaves/_history.html.erb:1
  Rendered leaves/_history.html.erb (Duration: 0.3ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC[0m  [["book_id", 1], ["status", "active"]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" IN (?, ?, ?, ?)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 5]]
  ↳ app/views/leaves/_sidebar.html.erb:8
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendered leaves/_sidebar.html.erb (Duration: 7.0ms | GC: 0.4ms)
  Rendered leaves/_being_edited_indicator.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ config/routes.rb:64:in `block (2 levels) in <top (required)>'
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered pages/_form.html.erb (Duration: 1.2ms | GC: 0.0ms)
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ? AND "leaves"."status" = ? AND "leaves"."id" != ? AND (position_score > ?) ORDER BY "leaves"."position_score" ASC, "leaves"."id" ASC LIMIT ?[0m  [["book_id", 1], ["status", "active"], ["id", 2], [nil, 2.0], ["LIMIT", 1]]
  ↳ app/models/concerns/positionable.rb:40:in `next'
  Rendered leaves/_edit_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered pages/edit.html.erb within layouts/application (Duration: 11.6ms | GC: 0.6ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | GC: 0.7ms)
Completed 200 OK in 62ms (Views: 12.6ms | ActiveRecord: 0.7ms (19 queries, 4 cached) | GC: 1.1ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:39:09 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 32.8ms | GC: 26.3ms)
Completed 200 OK in 97ms (Views: 41.7ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 26.9ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:39:10 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 19.2ms | GC: 11.9ms)
Completed 200 OK in 59ms (Views: 18.4ms | ActiveRecord: 1.1ms (14 queries, 0 cached) | GC: 18.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:39:26 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.1ms | GC: 0.4ms)
Completed 200 OK in 39ms (Views: 5.8ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 0.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:00 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.9ms | GC: 0.4ms)
Completed 200 OK in 45ms (Views: 4.8ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:15 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.7ms | GC: 1.9ms)
Completed 200 OK in 40ms (Views: 7.8ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.9ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:21 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.2ms | GC: 0.5ms)
Completed 200 OK in 46ms (Views: 7.0ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.0ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:41:21 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.1ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 41ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:28 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.1ms | GC: 0.6ms)
Completed 200 OK in 49ms (Views: 5.0ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:29 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.9ms | GC: 1.9ms)
Completed 200 OK in 39ms (Views: 7.2ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.9ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:43 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.3ms | GC: 0.6ms)
Completed 200 OK in 50ms (Views: 6.0ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.2ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:41:55 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.5ms | GC: 0.4ms)
Completed 200 OK in 49ms (Views: 5.4ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.5ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:42:14 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.1ms | GC: 0.0ms)
Completed 200 OK in 36ms (Views: 4.0ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:42:14 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.3ms | GC: 1.2ms)
Completed 200 OK in 38ms (Views: 6.1ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 2.8ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:42:15 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.2ms | GC: 0.2ms)
Completed 200 OK in 38ms (Views: 5.2ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:42:26 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.9ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 5.8ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.9ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:46:45 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:47:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.7ms | GC: 1.5ms)
Completed 200 OK in 50ms (Views: 6.5ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 2.8ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:46:45 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.2ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 30ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:46:53 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manual new version", "id"=>"1", "book"=>{"title"=>"The Writebook Manual new version"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Content in 50ms (ActiveRecord: 0.1ms (2 queries, 0 cached) | GC: 0.1ms)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
rails (13d5f8720892) actionpack/lib/action_controller/metal/request_forgery_protection.rb:312:in `handle_unverified_request'
rails (13d5f8720892) actionpack/lib/action_controller/metal/request_forgery_protection.rb:406:in `handle_unverified_request'
rails (13d5f8720892) actionpack/lib/action_controller/metal/request_forgery_protection.rb:395:in `verify_authenticity_token'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:361:in `block in make_lambda'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:178:in `block in call'
rails (13d5f8720892) actionpack/lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:179:in `call'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:558:in `block in invoke_before'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:558:in `each'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:558:in `invoke_before'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
turbo-rails (2.0.11) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.11) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
rails (13d5f8720892) actiontext/lib/action_text/rendering.rb:25:in `with_renderer'
rails (13d5f8720892) actiontext/lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:129:in `instance_exec'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:140:in `run_callbacks'
rails (13d5f8720892) actionpack/lib/abstract_controller/callbacks.rb:260:in `process_action'
rails (13d5f8720892) actionpack/lib/action_controller/metal/rescue.rb:27:in `process_action'
rails (13d5f8720892) actionpack/lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
rails (13d5f8720892) activesupport/lib/active_support/notifications.rb:210:in `block in instrument'
rails (13d5f8720892) activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
rails (13d5f8720892) activesupport/lib/active_support/notifications.rb:210:in `instrument'
rails (13d5f8720892) actionpack/lib/action_controller/metal/instrumentation.rb:75:in `process_action'
rails (13d5f8720892) actionpack/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
rails (13d5f8720892) activerecord/lib/active_record/railties/controller_runtime.rb:39:in `process_action'
rails (13d5f8720892) actionpack/lib/abstract_controller/base.rb:163:in `process'
rails (13d5f8720892) actionview/lib/action_view/rendering.rb:40:in `process'
rails (13d5f8720892) actionpack/lib/action_controller/metal.rb:252:in `dispatch'
rails (13d5f8720892) actionpack/lib/action_controller/metal.rb:335:in `dispatch'
rails (13d5f8720892) actionpack/lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
rails (13d5f8720892) actionpack/lib/action_dispatch/routing/route_set.rb:50:in `serve'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:53:in `block in serve'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:126:in `each'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:126:in `find_routes'
rails (13d5f8720892) actionpack/lib/action_dispatch/journey/router.rb:34:in `serve'
rails (13d5f8720892) actionpack/lib/action_dispatch/routing/route_set.rb:908:in `call'
rails (13d5f8720892) railties/lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.1.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.8) lib/rack/etag.rb:29:in `call'
rack (3.1.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.8) lib/rack/head.rb:15:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/http/permissions_policy.rb:38:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/cookies.rb:706:in `call'
rails (13d5f8720892) activerecord/lib/active_record/migration.rb:672:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
rails (13d5f8720892) activesupport/lib/active_support/callbacks.rb:100:in `run_callbacks'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/callbacks.rb:30:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/executor.rb:16:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
rails (13d5f8720892) railties/lib/rails/rack/logger.rb:41:in `call_app'
rails (13d5f8720892) railties/lib/rails/rack/logger.rb:29:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.1.8) lib/rack/method_override.rb:28:in `call'
rack (3.1.8) lib/rack/runtime.rb:24:in `call'
rails (13d5f8720892) activesupport/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/server_timing.rb:60:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/executor.rb:16:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.8) lib/rack/sendfile.rb:114:in `call'
rails (13d5f8720892) actionpack/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rails (13d5f8720892) railties/lib/rails/engine.rb:536:in `call'
puma (6.4.3) lib/puma/configuration.rb:272:in `call'
puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.3) lib/puma/request.rb:99:in `handle_request'
puma (6.4.3) lib/puma/server.rb:464:in `process_client'
puma (6.4.3) lib/puma/server.rb:245:in `block in run'
puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/books/1.json" for ::1 at 2024-11-21 13:47:15 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 35.6ms | GC: 4.8ms)
Completed 200 OK in 107ms (Views: 43.2ms | ActiveRecord: 2.0ms (14 queries, 0 cached) | GC: 5.8ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:47:18 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manual new version", "id"=>"1", "book"=>{"title"=>"The Writebook Manual new version"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
Can't verify CSRF token authenticity.
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mBook Update (0.9ms)[0m  [1m[33mUPDATE "books" SET "title" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["title", "The Writebook Manual new version"], ["updated_at", "2024-11-21 05:47:18.154552"], ["id", 1]]
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mUser Ids (0.0ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."active" = ?[0m  [["active", 1]]
  ↳ app/models/book/accessable.rb:37:in `update_access'
  [1m[36mAccess Upsert (0.1ms)[0m  [1m[32mINSERT INTO "accesses" ("user_id","level","book_id","created_at","updated_at") VALUES (1, 'editor', 1, STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'), STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) ON CONFLICT ("user_id","book_id") DO UPDATE SET updated_at=(CASE WHEN ("level" IS excluded."level") THEN "accesses".updated_at ELSE STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') END),"level"=excluded."level" RETURNING "id"[0m
  ↳ app/models/book/accessable.rb:44:in `update_access'
  [1m[36mAccess Delete All (0.0ms)[0m  [1m[31mDELETE FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" != ?[0m  [["book_id", 1], ["user_id", 1]]
  ↳ app/models/book/accessable.rb:45:in `update_access'
Redirected to http://localhost:3001/1/the-writebook-manual
Completed 302 Found in 85ms (ActiveRecord: 2.4ms (9 queries, 0 cached) | GC: 16.0ms)


Started GET "/cable" for ::1 at 2024-11-21 13:48:01 +0800
Started GET "/cable" [WebSocket] for ::1 at 2024-11-21 13:48:01 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/channels/application_cable/connection.rb:14:in `find_verified_user'
Registered connection (Z2lkOi8vd3JpdGVib29rL1VzZXIvMQ)
Started GET "/books/1.json" for ::1 at 2024-11-21 13:48:33 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 10.6ms | GC: 1.4ms)
Completed 200 OK in 49ms (Views: 11.5ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:48:35 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.1ms | GC: 0.7ms)
Completed 200 OK in 44ms (Views: 5.9ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.9ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:48:44 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manual this is awesome", "id"=>"1", "book"=>{"title"=>"The Writebook Manual this is awesome"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
Can't verify CSRF token authenticity.
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mBook Update (0.4ms)[0m  [1m[33mUPDATE "books" SET "title" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["title", "The Writebook Manual this is awesome"], ["updated_at", "2024-11-21 05:48:44.777437"], ["id", 1]]
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mUser Ids (0.0ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."active" = ?[0m  [["active", 1]]
  ↳ app/models/book/accessable.rb:37:in `update_access'
  [1m[36mAccess Upsert (0.1ms)[0m  [1m[32mINSERT INTO "accesses" ("user_id","level","book_id","created_at","updated_at") VALUES (1, 'editor', 1, STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'), STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) ON CONFLICT ("user_id","book_id") DO UPDATE SET updated_at=(CASE WHEN ("level" IS excluded."level") THEN "accesses".updated_at ELSE STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') END),"level"=excluded."level" RETURNING "id"[0m
  ↳ app/models/book/accessable.rb:44:in `update_access'
  [1m[36mAccess Delete All (0.0ms)[0m  [1m[31mDELETE FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" != ?[0m  [["book_id", 1], ["user_id", 1]]
  ↳ app/models/book/accessable.rb:45:in `update_access'
Redirected to http://localhost:3001/1/the-writebook-manual
Completed 302 Found in 55ms (ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:48:46 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 54ms (Views: 4.4ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 5.9ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:48:48 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.2ms | GC: 0.6ms)
Completed 200 OK in 55ms (Views: 8.6ms | ActiveRecord: 0.7ms (14 queries, 0 cached) | GC: 1.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:49:29 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.5ms | GC: 0.4ms)
Completed 200 OK in 41ms (Views: 5.4ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:49:32 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.5ms | GC: 4.2ms)
Completed 200 OK in 55ms (Views: 9.4ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 4.2ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:50:20 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.0ms | GC: 0.4ms)
Completed 200 OK in 52ms (Views: 7.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:50:51 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.9ms | GC: 0.4ms)
Completed 200 OK in 37ms (Views: 5.3ms | ActiveRecord: 0.9ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:50:52 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.6ms | GC: 3.6ms)
Completed 200 OK in 41ms (Views: 8.4ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 3.6ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:50:56 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manual this", "id"=>"1", "book"=>{"title"=>"The Writebook Manual this"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
Can't verify CSRF token authenticity.
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mBook Update (0.5ms)[0m  [1m[33mUPDATE "books" SET "title" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["title", "The Writebook Manual this"], ["updated_at", "2024-11-21 05:50:56.382632"], ["id", 1]]
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mUser Ids (0.0ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."active" = ?[0m  [["active", 1]]
  ↳ app/models/book/accessable.rb:37:in `update_access'
  [1m[36mAccess Upsert (0.1ms)[0m  [1m[32mINSERT INTO "accesses" ("user_id","level","book_id","created_at","updated_at") VALUES (1, 'editor', 1, STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'), STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) ON CONFLICT ("user_id","book_id") DO UPDATE SET updated_at=(CASE WHEN ("level" IS excluded."level") THEN "accesses".updated_at ELSE STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') END),"level"=excluded."level" RETURNING "id"[0m
  ↳ app/models/book/accessable.rb:44:in `update_access'
  [1m[36mAccess Delete All (0.0ms)[0m  [1m[31mDELETE FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" != ?[0m  [["book_id", 1], ["user_id", 1]]
  ↳ app/models/book/accessable.rb:45:in `update_access'
Redirected to http://localhost:3001/1/the-writebook-manual
Completed 302 Found in 56ms (ActiveRecord: 1.8ms (9 queries, 0 cached) | GC: 0.1ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:50:56 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.3ms | GC: 0.5ms)
Completed 200 OK in 36ms (Views: 5.2ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.6ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:50:58 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 1.4ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:51:00 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.8ms | GC: 1.2ms)
Completed 200 OK in 52ms (Views: 6.6ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 3.1ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:51:09 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manual fuck", "id"=>"1", "book"=>{"title"=>"The Writebook Manual fuck"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
Can't verify CSRF token authenticity.
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mBook Update (0.5ms)[0m  [1m[33mUPDATE "books" SET "title" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["title", "The Writebook Manual fuck"], ["updated_at", "2024-11-21 05:51:09.985598"], ["id", 1]]
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mUser Ids (0.0ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."active" = ?[0m  [["active", 1]]
  ↳ app/models/book/accessable.rb:37:in `update_access'
  [1m[36mAccess Upsert (0.1ms)[0m  [1m[32mINSERT INTO "accesses" ("user_id","level","book_id","created_at","updated_at") VALUES (1, 'editor', 1, STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'), STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) ON CONFLICT ("user_id","book_id") DO UPDATE SET updated_at=(CASE WHEN ("level" IS excluded."level") THEN "accesses".updated_at ELSE STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') END),"level"=excluded."level" RETURNING "id"[0m
  ↳ app/models/book/accessable.rb:44:in `update_access'
  [1m[36mAccess Delete All (0.0ms)[0m  [1m[31mDELETE FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" != ?[0m  [["book_id", 1], ["user_id", 1]]
  ↳ app/models/book/accessable.rb:45:in `update_access'
Redirected to http://localhost:3001/1/the-writebook-manual
Completed 302 Found in 57ms (ActiveRecord: 0.9ms (9 queries, 0 cached) | GC: 0.1ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:51:10 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.8ms | GC: 0.4ms)
Completed 200 OK in 36ms (Views: 4.8ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.5ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:51:16 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manua", "id"=>"1", "book"=>{"title"=>"The Writebook Manua"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
Can't verify CSRF token authenticity.
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mBook Update (0.4ms)[0m  [1m[33mUPDATE "books" SET "title" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["title", "The Writebook Manua"], ["updated_at", "2024-11-21 05:51:16.509038"], ["id", 1]]
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mUser Ids (0.0ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."active" = ?[0m  [["active", 1]]
  ↳ app/models/book/accessable.rb:37:in `update_access'
  [1m[36mAccess Upsert (0.1ms)[0m  [1m[32mINSERT INTO "accesses" ("user_id","level","book_id","created_at","updated_at") VALUES (1, 'editor', 1, STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'), STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) ON CONFLICT ("user_id","book_id") DO UPDATE SET updated_at=(CASE WHEN ("level" IS excluded."level") THEN "accesses".updated_at ELSE STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') END),"level"=excluded."level" RETURNING "id"[0m
  ↳ app/models/book/accessable.rb:44:in `update_access'
  [1m[36mAccess Delete All (0.0ms)[0m  [1m[31mDELETE FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" != ?[0m  [["book_id", 1], ["user_id", 1]]
  ↳ app/models/book/accessable.rb:45:in `update_access'
Redirected to http://localhost:3001/1/the-writebook-manual
Completed 302 Found in 55ms (ActiveRecord: 0.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:51:16 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.5ms | GC: 1.2ms)
Completed 200 OK in 33ms (Views: 5.6ms | ActiveRecord: 0.3ms (14 queries, 0 cached) | GC: 1.3ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:51:18 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.4ms | GC: 0.1ms)
Completed 200 OK in 39ms (Views: 1.4ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.1ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:51:50 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.1ms | GC: 0.4ms)
Completed 200 OK in 38ms (Views: 2.1ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:52:18 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 1.5ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:52:20 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 3.2ms | GC: 1.5ms)
Completed 200 OK in 54ms (Views: 3.3ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 1.5ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:52:21 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.6ms | GC: 0.5ms)
Completed 200 OK in 47ms (Views: 2.6ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.5ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:54:30 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 1.8ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:54:31 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.5ms | GC: 0.1ms)
Completed 200 OK in 35ms (Views: 1.5ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e/writebook-manual.jpg" for ::1 at 2024-11-21 13:54:31 +0800
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsiZGF0YSI6MSwicHVyIjoiYmxvYl9pZCJ9fQ==--10ba814d1b9b5955f5ba0d5b360324620b49144e", "filename"=>"writebook-manual"}
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[36m  Disk Storage (0.2ms) [0m[34mGenerated URL for file at key: d1qe2pjtbdlfqqwm2sj26qmfjxny (http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg)[0m
Redirected to http://localhost:3001/rails/active_storage/disk/eyJfcmFpbHMiOnsiZGF0YSI6eyJrZXkiOiJkMXFlMnBqdGJkbGZxcXdtMnNqMjZxbWZqeG55IiwiZGlzcG9zaXRpb24iOiJpbmxpbmU7IGZpbGVuYW1lPVwid3JpdGVib29rLW1hbnVhbC5qcGdcIjsgZmlsZW5hbWUqPVVURi04Jyd3cml0ZWJvb2stbWFudWFsLmpwZyIsImNvbnRlbnRfdHlwZSI6ImltYWdlL2pwZWciLCJzZXJ2aWNlX25hbWUiOiJsb2NhbCJ9LCJwdXIiOiJibG9iX2tleSJ9fQ==--51532e6e462bbb45fbc64185a3b7ff292736a2ea/writebook-manual.jpg
Completed 302 Found in 33ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.3ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:54:32 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 8.7ms | GC: 1.9ms)
Completed 200 OK in 42ms (Views: 8.5ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 1.9ms)


Started PATCH "/books/1" for ::1 at 2024-11-21 13:54:37 +0800
Processing by BooksController#update as */*
  Parameters: {"title"=>"The Writebook Manual", "id"=>"1", "book"=>{"title"=>"The Writebook Manual"}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
Can't verify CSRF token authenticity.
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mBook Update (0.4ms)[0m  [1m[33mUPDATE "books" SET "title" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["title", "The Writebook Manual"], ["updated_at", "2024-11-21 05:54:37.149507"], ["id", 1]]
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/controllers/books_controller.rb:34:in `update'
  [1m[36mUser Ids (0.0ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."active" = ?[0m  [["active", 1]]
  ↳ app/models/book/accessable.rb:37:in `update_access'
  [1m[36mAccess Upsert (0.1ms)[0m  [1m[32mINSERT INTO "accesses" ("user_id","level","book_id","created_at","updated_at") VALUES (1, 'editor', 1, STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'), STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) ON CONFLICT ("user_id","book_id") DO UPDATE SET updated_at=(CASE WHEN ("level" IS excluded."level") THEN "accesses".updated_at ELSE STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') END),"level"=excluded."level" RETURNING "id"[0m
  ↳ app/models/book/accessable.rb:44:in `update_access'
  [1m[36mAccess Delete All (0.0ms)[0m  [1m[31mDELETE FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" != ?[0m  [["book_id", 1], ["user_id", 1]]
  ↳ app/models/book/accessable.rb:45:in `update_access'
Redirected to http://localhost:3001/1/the-writebook-manual
Completed 302 Found in 52ms (ActiveRecord: 0.7ms (9 queries, 0 cached) | GC: 0.8ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:54:37 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 4.4ms | GC: 0.3ms)
Completed 200 OK in 33ms (Views: 4.3ms | ActiveRecord: 0.3ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books.json" for ::1 at 2024-11-21 13:54:39 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 54ms (Views: 2.4ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:54:39 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 10.0ms | GC: 2.7ms)
Completed 200 OK in 43ms (Views: 9.7ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 2.7ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 13:58:22 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 5.8ms | GC: 0.1ms)
Completed 200 OK in 44ms (Views: 5.6ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.2ms)


Started GET "/books/1/edit" for ::1 at 2024-11-21 13:58:26 +0800
Processing by BooksController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  [1m[36mAccess Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  Rendering layout layouts/application.html.erb
  Rendering books/edit.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/_form.html.erb:2
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/_form.html.erb:25
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = ? ORDER BY "users"."name" ASC[0m  [["active", 1]]
  ↳ app/views/books/_form.html.erb:81
  [1m[36mCACHE Access Load (0.0ms)[0m  [1m[34mSELECT "accesses".* FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:32:in `access_for'
  [1m[36mAccess Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accesses" WHERE "accesses"."book_id" = ? AND "accesses"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/book/accessable.rb:24:in `accessable?'
  Rendered collection of books/accesses/_access.html.erb [1 times] (Duration: 2.6ms | GC: 0.0ms)
  Rendered books/_form.html.erb (Duration: 11.2ms | GC: 0.0ms)
  Rendered books/edit.html.erb within layouts/application (Duration: 14.9ms | GC: 0.0ms)
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" ORDER BY "accounts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/models/current.rb:5:in `account'
  Rendered layouts/_lightbox.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.2ms | GC: 3.5ms)
Completed 200 OK in 88ms (Views: 30.8ms | ActiveRecord: 0.6ms (10 queries, 1 cached) | GC: 4.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:35:15 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (1.7ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[35mSQL (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  ↳ app/models/session.rb:16:in `resume'
  [1m[36mSession Update (0.4ms)[0m  [1m[33mUPDATE "sessions" SET "last_active_at" = ?, "updated_at" = ? WHERE "sessions"."id" = ?[0m  [["last_active_at", "2024-11-21 06:35:15.471507"], ["updated_at", "2024-11-21 06:35:15.472149"], ["id", 1]]
  ↳ app/models/session.rb:16:in `resume'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  ↳ app/models/session.rb:16:in `resume'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.1ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.3ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.6ms | GC: 0.9ms)
Completed 200 OK in 54ms (Views: 7.1ms | ActiveRecord: 3.0ms (16 queries, 0 cached) | GC: 1.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:35:16 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.2ms | GC: 3.2ms)
Completed 200 OK in 54ms (Views: 9.7ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 3.2ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:36:34 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 14.2ms | GC: 0.2ms)
Completed 200 OK in 59ms (Views: 14.1ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:38:49 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.0ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 5.9ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 0.8ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:39:49 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.1ms | GC: 1.4ms)
Completed 200 OK in 39ms (Views: 6.0ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 1.4ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:39:54 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 6.8ms | GC: 0.4ms)
Completed 200 OK in 55ms (Views: 6.7ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 0.5ms)


Started GET "/books.json" for ::1 at 2024-11-21 14:39:57 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 5.8ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 5.8ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:39:57 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.5ms | GC: 2.7ms)
Completed 200 OK in 39ms (Views: 7.3ms | ActiveRecord: 0.4ms (14 queries, 0 cached) | GC: 2.7ms)


Started GET "/books.json" for ::1 at 2024-11-21 14:40:06 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 2.0ms | GC: 0.2ms)
Completed 200 OK in 53ms (Views: 2.0ms | ActiveRecord: 0.3ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:40:07 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.1ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.1ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 7.9ms | GC: 0.7ms)
Completed 200 OK in 56ms (Views: 7.6ms | ActiveRecord: 0.6ms (14 queries, 0 cached) | GC: 0.8ms)


Started GET "/books.json" for ::1 at 2024-11-21 14:40:07 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 1.5ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/books/1.json" for ::1 at 2024-11-21 14:40:08 +0800
Processing by BooksController#show as JSON
  Parameters: {"id"=>"1", "book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) AND "books"."id" = ? LIMIT ?[0m  [["user_id", 1], ["published", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:49:in `set_book'
  Rendering books/show.jbuilder
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:2
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:3
  [1m[36mLeaf Load (0.0ms)[0m  [1m[34mSELECT "leaves".* FROM "leaves" WHERE "leaves"."book_id" = ?[0m  [["book_id", 1]]
  ↳ app/views/books/show.jbuilder:5
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  [1m[36mPage Load (0.0ms)[0m  [1m[34mSELECT "pages".* FROM "pages" WHERE "pages"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/views/books/show.jbuilder:8
  [1m[36mActionText::Markdown Load (0.0ms)[0m  [1m[34mSELECT "action_text_markdowns".* FROM "action_text_markdowns" WHERE "action_text_markdowns"."record_id" = ? AND "action_text_markdowns"."record_type" = ? AND "action_text_markdowns"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Page"], ["name", "body"], ["LIMIT", 1]]
  ↳ lib/rails_ext/action_text_has_markdown.rb:9:in `body'
  Rendered books/show.jbuilder (Duration: 9.2ms | GC: 3.3ms)
Completed 200 OK in 56ms (Views: 9.1ms | ActiveRecord: 0.5ms (14 queries, 0 cached) | GC: 3.3ms)


Started GET "/books.json" for ::1 at 2024-11-21 14:40:11 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.9ms | GC: 0.2ms)
Completed 200 OK in 52ms (Views: 2.0ms | ActiveRecord: 0.2ms (5 queries, 0 cached) | GC: 0.2ms)


Finished "/cable" [WebSocket] for ::1 at 2024-11-21 15:19:30 +0800
Started GET "/books.json" for ::1 at 2024-11-21 15:19:30 +0800
Processing by BooksController#index as JSON
  Parameters: {"book"=>{}}
  [1m[36mSession Load (3.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."token" = ? LIMIT ?[0m  [["token", "JWrB2AxJ8uvPjPUeFyKoKoyr"], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication/session_lookup.rb:4:in `find_session_by_cookie'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/concerns/authentication.rb:60:in `authenticated_as'
  Rendering books/index.jbuilder
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT DISTINCT "books".* FROM "books" INNER JOIN "accesses" ON "books"."id" = "accesses"."book_id" WHERE ("accesses"."user_id" = ? OR "books"."published" = ?) ORDER BY "books"."title" ASC[0m  [["user_id", 1], ["published", 1]]
  ↳ app/views/books/index.jbuilder:1
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Book"], ["name", "cover"], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:3
  [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/books/index.jbuilder:4
  Rendered books/index.jbuilder (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 1.8ms | ActiveRecord: 3.5ms (5 queries, 0 cached) | GC: 0.0ms)


